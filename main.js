const _0x1f8f5b=_0x420b;(function(_0x1bec7f,_0x201ab2){const _0x7eb721=_0x420b,_0x413ab0=_0x1bec7f();while(!![]){try{const _0x19f9a0=-parseInt(_0x7eb721(0x210))/0x1*(-parseInt(_0x7eb721(0x182))/0x2)+parseInt(_0x7eb721(0x231))/0x3*(parseInt(_0x7eb721(0x1bb))/0x4)+-parseInt(_0x7eb721(0x1d1))/0x5+parseInt(_0x7eb721(0x242))/0x6*(-parseInt(_0x7eb721(0x228))/0x7)+-parseInt(_0x7eb721(0x13e))/0x8*(parseInt(_0x7eb721(0x1fa))/0x9)+-parseInt(_0x7eb721(0x1f8))/0xa*(-parseInt(_0x7eb721(0x1d6))/0xb)+parseInt(_0x7eb721(0x21d))/0xc;if(_0x19f9a0===_0x201ab2)break;else _0x413ab0['push'](_0x413ab0['shift']());}catch(_0x401240){_0x413ab0['push'](_0x413ab0['shift']());}}}(_0x2e6e,0x3c9a2));const express=require(_0x1f8f5b(0x19b)),https=require('https'),http=require('http'),path=require(_0x1f8f5b(0x1a6)),ejs=require(_0x1f8f5b(0x1b0)),fs=require(_0x1f8f5b(0x23f)),bodyParser=require('body-parser'),subtitles=require('./node/subtitles.js'),providers=require(_0x1f8f5b(0x152)),singleMovie=require(_0x1f8f5b(0x1ed)),party=require('./node/party.js'),ip=require(_0x1f8f5b(0x1af)),cors=require(_0x1f8f5b(0x194)),version=_0x1f8f5b(0x175),WebSocketServer=require('ws')['WebSocketServer'],app=express(),url=require(_0x1f8f5b(0x1d0));if(process[_0x1f8f5b(0x1e2)][0x3]==_0x1f8f5b(0x17a)){}else{if(process['argv'][0x3]==_0x1f8f5b(0x1b6)){const os=require('os');os[_0x1f8f5b(0x13d)]()==_0x1f8f5b(0x17c)?process[_0x1f8f5b(0x1e2)][0x2]=_0x1f8f5b(0x153):process[_0x1f8f5b(0x1e2)][0x2]=path[_0x1f8f5b(0x1c8)](os['homedir'](),'ONVO\x20TV');}else process[_0x1f8f5b(0x1e2)][0x2]=path[_0x1f8f5b(0x1c8)](process['argv'][0x2],_0x1f8f5b(0x1b9));}function _0x420b(_0x1586f2,_0xb88544){const _0x2e6e1a=_0x2e6e();return _0x420b=function(_0x420ba7,_0x28bfc9){_0x420ba7=_0x420ba7-0x136;let _0x471730=_0x2e6e1a[_0x420ba7];return _0x471730;},_0x420b(_0x1586f2,_0xb88544);}let client={};function _0x2e6e(){const _0x408cb7=['join','map','/subtitles','readFileSync','/local','twenty-ninth',':5000?magic_portal=true','Directory\x20removed\x20successfully!','url','2201715DaJQpW','HTTP\x20server\x20running\x20on\x20http://localhost:5000','action','listen','sendFile','3951673kBSpVt','/:type(private_css|private_js)/:folder/:file','Access\x20denied','twenty-third','createWriteStream','error','resolve','Error\x20moving\x20folder:\x20','getNetwork','view\x20engine','duplicate_torrent','root','argv','twenty-eighth','clear','set','fourteenth','seventeenth','type','https://subdl.com/subtitle/sd','public','./node/cores.mjs','singleMovie','./node/singleMovie.js','no_video_found','parse','post','log','/sets','remove','readdirSync','Failed\x20to\x20get\x20\x27','image','has','10EmHDaM','episodes','63cyZiQF','missed_data','createServer','.css','ping','first','slug','json','no_data_found','codec','Invalid\x20structure','writeHead','\x20to\x20','thirty-fifth','authorization','region','split','The\x20deletePath\x20is\x20outside\x20of\x20the\x20savePath\x20folder','homePage','series','destroy','twenty-seventh','114890ShuXXW','range','utf-8','crypto','episode\x20removed\x20successfully!','::1','Content-Disposition','player','client','val','850kb','catch','/hash','2756064QsuhKY','nineteenth','policy','disable','cache\x20cleared','headersSent','.js','normalize','season','-season','/pause','1316987tNeccX','message','createReadStream','text/css','Please\x20select\x20the\x20episode\x20you\x20want\x20to\x20play','File\x20[','endpoint','header','seventh','13995JNzUiW','second','key','success','settings.json','replace','frusers','offline','Error\x20occured','info.json','/chache','data','getInfo','urlencoded','fs-extra','connection','size','12pveKfr','user','pong','headers','use','toDataURL','rmSync','push','/network','platform','210536eKsZzB','downloaded','mkdirSync','index','paused','magnate','getData','127.0.0.1','files','multiple','alloc','Please\x20provide\x201\x20to\x2015\x20file\x20paths.','existsSync','Content-Type','sixth','link','end','file','stack','torrents','./node/providers.js','/ONVO\x20TV',']\x20finished','Something\x20broke!\x20','writeFileSync','no_avilable_space','pipe','/:type(movie|series)/:endpoint','partyIn','thirty-fourth','all','utf8','statusCode','fourth','setHeader','http://localhost:5000/local?path=','body','server-started','/torrents','http://','includes','getZip','WebSocket\x20disconnected','/wipe','localhost','closed','portal','device','params','send','WebSocket\x20error:','Internal\x20Server\x20Error','stringify','extname','thirty-sixth','1.5','Deleted:\x20','eighteenth','digest','twenty-fourth','android','status','win32','true','close','/info','toString','no_id_found','8gFHqvt','third','Folder\x20moved\x20from\x20','thirtieth','/videoshare','Error\x20downloading\x20','name','then','fifteenth','/subtitles/zip','entries','/delete','save','delete','trust\x20proxy','eleventh','qrcode','Upload\x20complete','cors','private_css','host','downloads','thirty-first','sha256','https://image.tmdb.org/t/p/','express','get','party','finish','rename','::ffff:','length','query','owner','hex','twelfth','path','episode','views','startsWith','attachment;\x20filename=\x22','basename','Error\x20deleting\x20path:\x20','done','Error\x20removing\x20directory:','./node/ip.js','ejs','socket','seasons','render','1mb','update','electron','.json','createHash','../../','endsWith','172BDXaZC','forEach','/videoget','/download','twentieth','ninth','download','destroyed\x20cleared','/watch?locale=','sixteenth','\x27\x20(','Server\x20error','thirty-second'];_0x2e6e=function(){return _0x408cb7;};return _0x2e6e();}app[_0x1f8f5b(0x1e5)](_0x1f8f5b(0x190),!![]),app[_0x1f8f5b(0x138)](cors());let allowLocalNetwork=![];app['use']((_0x118a9c,_0x5cb3f4,_0x46d3d1)=>{const _0x5bea3a=_0x1f8f5b;_0x5cb3f4[_0x5bea3a(0x22f)]('Access-Control-Allow-Origin','*');const _0x1f34c1=_0x118a9c['ip'],_0x119206=_0x118a9c['headers'][_0x5bea3a(0x196)];if(_0x119206[_0x5bea3a(0x166)](_0x5bea3a(0x16a))||_0x1f34c1===_0x5bea3a(0x145)||_0x1f34c1===_0x5bea3a(0x215))return _0x46d3d1();if(!allowLocalNetwork)return _0x5cb3f4[_0x5bea3a(0x17b)](0x193)['send'](_0x5bea3a(0x1d8));_0x46d3d1();}),app[_0x1f8f5b(0x138)](bodyParser['json']()),app['use'](bodyParser[_0x1f8f5b(0x23e)]({'extended':!![]})),app['use'](express[_0x1f8f5b(0x201)]({'limit':_0x1f8f5b(0x21a)})),app['set'](_0x1f8f5b(0x1a8),[path[_0x1f8f5b(0x1c8)](__dirname,'ejs',_0x1f8f5b(0x19d)),path['join'](__dirname,_0x1f8f5b(0x1b0),'player'),path[_0x1f8f5b(0x1c8)](__dirname,_0x1f8f5b(0x1b0),_0x1f8f5b(0x21f)),path[_0x1f8f5b(0x1c8)](__dirname,_0x1f8f5b(0x1b0),_0x1f8f5b(0x1c1)),path[_0x1f8f5b(0x1c8)](__dirname,_0x1f8f5b(0x1b0),_0x1f8f5b(0x1ec)),path[_0x1f8f5b(0x1c8)](__dirname,_0x1f8f5b(0x1ea))]),app['set'](_0x1f8f5b(0x1df),'ejs'),app[_0x1f8f5b(0x138)](express['static'](path['join'](__dirname,_0x1f8f5b(0x1ea)))),app[_0x1f8f5b(0x19c)]('/party/:endpoint',async(_0x2e551d,_0x532121)=>{const _0x21b16c=_0x1f8f5b,_0x313751=_0x2e551d[_0x21b16c(0x16e)][_0x21b16c(0x22e)],_0x4218a2=await party[_0x21b16c(0x144)](_0x313751);_0x532121[_0x21b16c(0x1b3)](_0x21b16c(0x15a),{'req':_0x2e551d,'data':_0x4218a2});}),app[_0x1f8f5b(0x19c)]('/player',async(_0x4ae3ea,_0x53516e)=>{const _0x3b8455=_0x1f8f5b,_0x445ca8=_0x4ae3ea[_0x3b8455(0x1a2)][_0x3b8455(0x1e8)],_0x5b8084=_0x4ae3ea[_0x3b8455(0x1a2)]['id'],_0x12f04d=await singleMovie[_0x3b8455(0x144)](_0x445ca8,_0x5b8084);_0x53516e['render'](_0x3b8455(0x217),{'req':_0x4ae3ea,'data':_0x12f04d});}),app[_0x1f8f5b(0x19c)](_0x1f8f5b(0x159),async(_0x11574c,_0x552b76)=>{const _0xc622f2=_0x1f8f5b,{type:_0x1f6714,endpoint:_0x47e93f}=_0x11574c[_0xc622f2(0x16e)],_0x460c79=await singleMovie[_0xc622f2(0x144)](_0x1f6714,_0x47e93f);if(!_0x460c79){_0x552b76[_0xc622f2(0x201)]({'error':_0xc622f2(0x202)});return;}_0x552b76[_0xc622f2(0x1b3)](_0xc622f2(0x1ec),{'req':_0x11574c,'data':_0x460c79});}),app[_0x1f8f5b(0x19c)]('/',(_0x1cecb4,_0x1f7ebd)=>{const _0x2162d3=_0x1f8f5b;_0x1f7ebd[_0x2162d3(0x1b3)](_0x2162d3(0x20c),{'req':_0x1cecb4});}),app[_0x1f8f5b(0x19c)](_0x1f8f5b(0x1d7),async(_0x4db700,_0x1831c5)=>{const _0x39aee3=_0x1f8f5b;try{const {type:_0x2ce719,folder:_0x1434f7,file:_0x3d7f80}=_0x4db700[_0x39aee3(0x16e)];if(_0x2ce719!==_0x39aee3(0x195)&&_0x2ce719!=='private_js'||!_0x3d7f80[_0x39aee3(0x1ba)](_0x39aee3(0x223))&&!_0x3d7f80[_0x39aee3(0x1ba)](_0x39aee3(0x1fd)))return _0x1831c5[_0x39aee3(0x17b)](0x194)['send']('');const _0x55ac7d=path['join'](__dirname,_0x39aee3(0x1b0),_0x1434f7,_0x3d7f80),_0x544f5a=_0x2ce719===_0x39aee3(0x195)?_0x39aee3(0x22b):'text/javascript';_0x1831c5[_0x39aee3(0x1e5)](_0x39aee3(0x14b),_0x544f5a),_0x1831c5[_0x39aee3(0x1d5)](_0x55ac7d);}catch(_0x28adeb){console[_0x39aee3(0x1db)]('Error:',_0x28adeb),_0x1831c5[_0x39aee3(0x17b)](0x1f4)[_0x39aee3(0x16f)](_0x39aee3(0x171));}});const videos=new Map(),sockets=new Map();async function HandleSos(_0x17d046,_0x13cf8b,_0x3d0a9a){const _0x45baca=_0x1f8f5b;try{const _0x24b547=await _0x3d0a9a['getVideo'](decodeURIComponent(_0x17d046[_0x45baca(0x1a2)][_0x45baca(0x14d)]),{'mvid':_0x17d046[_0x45baca(0x1a2)]['id'],..._0x17d046['query']},_0x17d046[_0x45baca(0x137)][_0x45baca(0x208)],videos,sockets);_0x24b547['type']!==_0x45baca(0x147)&&videos[_0x45baca(0x1e5)](_0x24b547['id'],{..._0x24b547});const _0x2d2a9d=_0x24b547;delete _0x2d2a9d[_0x45baca(0x14f)],delete _0x2d2a9d[_0x45baca(0x146)],_0x13cf8b[_0x45baca(0x17b)](0xc8)[_0x45baca(0x201)]({..._0x2d2a9d,'status':'success'});}catch(_0x339d01){console[_0x45baca(0x1db)](_0x339d01);if(_0x339d01['type']==_0x45baca(0x1e0)){let _0x73a23=videos[_0x45baca(0x19c)](_0x339d01['id']);delete _0x73a23[_0x45baca(0x14f)],delete _0x73a23[_0x45baca(0x146)],_0x13cf8b[_0x45baca(0x17b)](0xc8)[_0x45baca(0x201)]({..._0x73a23,'id':_0x339d01['id'],'downloaded':_0x339d01[_0x45baca(0x13f)],'magnate':_0x339d01[_0x45baca(0x143)],'status':_0x45baca(0x234)});}else _0x339d01[_0x45baca(0x1e8)]==_0x45baca(0x157)?_0x13cf8b[_0x45baca(0x17b)](0xc8)['json']({'status':_0x45baca(0x1db),'error':_0x339d01}):_0x13cf8b['status'](0xc8)[_0x45baca(0x201)](_0x339d01);}}let torrents=import(_0x1f8f5b(0x1eb));((async()=>{const _0x35701d=_0x1f8f5b;client=(await torrents)[_0x35701d(0x218)];})()),app[_0x1f8f5b(0x19c)]('/videoadd',async(_0x47b7a7,_0x19c750)=>{const _0x4d4191=_0x1f8f5b;try{HandleSos(_0x47b7a7,_0x19c750,await torrents);}catch(_0x54ecab){console[_0x4d4191(0x1db)](_0x54ecab),_0x19c750[_0x4d4191(0x17b)](0x1f4)[_0x4d4191(0x201)](_0x54ecab);}}),app[_0x1f8f5b(0x19c)](_0x1f8f5b(0x164),async(_0x198669,_0x71ecb6)=>{const _0x1fd202=_0x1f8f5b;try{let _0x56b570={},_0x2c39c8=0x0,_0x101145=0x0,_0x528ff2={};client[_0x1fd202(0x151)]?.[_0x1fd202(0x1bc)]((_0x2e5194,_0x47fa65)=>{const _0x29a1ea=_0x1fd202;let _0x479ab0={};!_0x2e5194[_0x29a1ea(0x1ad)]&&(_0x2e5194[_0x29a1ea(0x146)][_0x29a1ea(0x1bc)](_0x121dd9=>{const _0x3ee483=_0x29a1ea;_0x479ab0={'name':_0x121dd9[_0x3ee483(0x188)],'path':_0x121dd9[_0x3ee483(0x1a6)],'size':_0x121dd9[_0x3ee483(0x241)]};}),_0x56b570[_0x47fa65]={'size':_0x2e5194['length'],'downloaded':_0x2e5194[_0x29a1ea(0x13f)],'path':_0x2e5194[_0x29a1ea(0x1a6)],'paused':_0x2e5194[_0x29a1ea(0x142)]},_0x2c39c8+=_0x2e5194[_0x29a1ea(0x1a1)],_0x101145+=_0x2e5194[_0x29a1ea(0x13f)]);});try{let _0x3b393f=path[_0x1fd202(0x1c8)](savePath,'settings.json');if(fs[_0x1fd202(0x14a)](_0x3b393f)){const _0x2d7a5a=fs['readFileSync'](_0x3b393f,_0x1fd202(0x15d));_0x528ff2=JSON[_0x1fd202(0x1ef)](_0x2d7a5a);}}catch(_0x4aba1d){console['log'](_0x4aba1d);}_0x71ecb6[_0x1fd202(0x201)]({'downloaded':_0x101145,'size':_0x2c39c8,'data':_0x56b570,'save':_0x528ff2['save']});}catch(_0x2a54bc){console[_0x1fd202(0x1db)](_0x2a54bc),_0x71ecb6['status'](0x1f4)[_0x1fd202(0x201)](_0x2a54bc);}}),app[_0x1f8f5b(0x1f0)](_0x1f8f5b(0x169),async(_0x2cf0cf,_0x8afa0e)=>{const _0x12309e=_0x1f8f5b;try{videos[_0x12309e(0x18f)](_0x2cf0cf[_0x12309e(0x162)]['id']);const _0x952a63=await client[_0x12309e(0x19c)](_0x2cf0cf[_0x12309e(0x162)]['id']);fs[_0x12309e(0x1f3)](_0x952a63[_0x12309e(0x1a6)])[_0x12309e(0x189)](()=>{const _0x539d6a=_0x12309e;console[_0x539d6a(0x1f1)](_0x539d6a(0x1cf));})[_0x12309e(0x21b)](_0x1e628b=>{const _0x1f6e25=_0x12309e;console['error'](_0x1f6e25(0x1ae),_0x1e628b);}),await client[_0x12309e(0x1f3)](_0x2cf0cf[_0x12309e(0x162)]['id']),_0x952a63['destroy'](_0x952a63),_0x8afa0e[_0x12309e(0x201)]({'status':_0x12309e(0x234)});}catch(_0xa2e5ee){console[_0x12309e(0x1db)](_0xa2e5ee),_0x8afa0e[_0x12309e(0x17b)](0x1f4)['json'](_0xa2e5ee);}}),app['get'](_0x1f8f5b(0x227),async(_0x591419,_0x518eb5)=>{const _0x301eb3=_0x1f8f5b;try{if(_0x591419[_0x301eb3(0x1a2)][_0x301eb3(0x1e8)]=='all'){client[_0x301eb3(0x151)]['forEach']((_0x7e69f6,_0x6d2a65)=>{const _0x2714ed=_0x301eb3;_0x7e69f6[_0x2714ed(0x20e)]();}),_0x518eb5[_0x301eb3(0x201)]({'status':_0x301eb3(0x234),'length':client[_0x301eb3(0x151)][_0x301eb3(0x1a1)]});return;}if(!_0x591419[_0x301eb3(0x1a2)]['id']||!await client[_0x301eb3(0x19c)](_0x591419['query']['id'])){_0x518eb5[_0x301eb3(0x201)]({'error':_0x301eb3(0x181)});return;}const _0x2001bf=await client[_0x301eb3(0x19c)](_0x591419['query']['id']);_0x2001bf['destroy'](_0x2001bf),await client[_0x301eb3(0x1f3)](_0x591419[_0x301eb3(0x1a2)]['id']),_0x518eb5['json']({'status':_0x301eb3(0x234)});}catch(_0x591024){console[_0x301eb3(0x1db)](_0x591024),_0x518eb5[_0x301eb3(0x17b)](0x1f4)[_0x301eb3(0x201)](_0x591024);}}),app[_0x1f8f5b(0x19c)](_0x1f8f5b(0x1bd),async(_0x1b1547,_0x288c7f)=>{const _0x50ed5f=_0x1f8f5b;if(!videos[_0x50ed5f(0x1f7)](_0x1b1547[_0x50ed5f(0x1a2)]['id'])){_0x288c7f[_0x50ed5f(0x17b)](0x194)[_0x50ed5f(0x201)]({'error':_0x50ed5f(0x1ee)});return;}try{const _0x2acca0=await videos[_0x50ed5f(0x19c)](_0x1b1547[_0x50ed5f(0x1a2)]['id']),_0x2d5b32=_0x2acca0[_0x50ed5f(0x14f)],_0x174b7e=_0x1b1547['headers'][_0x50ed5f(0x211)],_0xd6b18=_0x2d5b32[_0x50ed5f(0x1a1)],_0x2eaba2=0xa**0x6;let _0x346e85,_0x3ba91f={'Content-Type':_0x2acca0[_0x50ed5f(0x203)],'Content-Length':_0xd6b18},_0x221c83=0xc8;if(_0x174b7e){const _0x2e5b90=_0x174b7e[_0x50ed5f(0x236)](/bytes=/,'')['split']('-'),_0x5d2a78=parseInt(_0x2e5b90[0x0],0xa),_0x18a961=_0x2e5b90[0x1]?parseInt(_0x2e5b90[0x1],0xa):_0xd6b18-0x1,_0x2ce459=_0x18a961-_0x5d2a78+0x1;_0x346e85={'start':_0x5d2a78,'end':_0x18a961},_0x3ba91f={'Content-Range':'bytes\x20'+_0x5d2a78+'-'+_0x18a961+'/'+_0xd6b18,'Accept-Ranges':'bytes','Content-Length':_0x2ce459,'Content-Type':_0x2acca0[_0x50ed5f(0x203)]},_0x221c83=0xce;}const _0x2a3175=_0x2d5b32[_0x50ed5f(0x22a)](_0x346e85);_0x2a3175['on']('error',_0x3e00d6=>{}),_0x288c7f[_0x50ed5f(0x205)](_0x221c83,_0x3ba91f),_0x2a3175['pipe'](_0x288c7f);}catch(_0x418834){console[_0x50ed5f(0x1db)]('Error\x20fetching\x20video:',_0x418834),_0x288c7f[_0x50ed5f(0x17b)](0x1f4)[_0x50ed5f(0x201)]({'error':'Error\x20fetching\x20video'});}}),app['get']('/files',(_0x5b7df1,_0x395c69)=>{const _0x5cb7b4=_0x1f8f5b;import('./node/info.js')[_0x5cb7b4(0x189)](async _0x1626c4=>{const _0x82b4d4=_0x5cb7b4;try{const _0x3dfbc5=await _0x1626c4[_0x82b4d4(0x23d)](savePath);_0x395c69[_0x82b4d4(0x201)](_0x3dfbc5);}catch(_0x4d00c6){_0x395c69[_0x82b4d4(0x16f)](_0x4d00c6['toString']());}});}),app[_0x1f8f5b(0x19c)](_0x1f8f5b(0x1be),(_0x8b95e4,_0xd3aa98)=>{const _0x3b0617=_0x1f8f5b;_0xd3aa98[_0x3b0617(0x1b3)](_0x3b0617(0x1c1),{'req':_0x8b95e4});}),app[_0x1f8f5b(0x19c)]('/check',(_0x3bcdc7,_0x4d67c6)=>{const _0x324911=_0x1f8f5b;_0x4d67c6['json']({'status':_0x324911(0x234),'version':version});}),app[_0x1f8f5b(0x19c)](_0x1f8f5b(0x18d),async(_0x1c934e,_0x320e35)=>{const _0x2d6d34=_0x1f8f5b;try{if(_0x1c934e['query'][_0x2d6d34(0x1e8)]==_0x2d6d34(0x20d)){const _0x3ed9f4=path[_0x2d6d34(0x1c8)](decodeURIComponent(_0x1c934e['query'][_0x2d6d34(0x1e1)]),_0x2d6d34(0x23a)),_0x819b60=fs[_0x2d6d34(0x1cb)](_0x3ed9f4,_0x2d6d34(0x15d)),_0x29c86b=JSON[_0x2d6d34(0x1ef)](_0x819b60),_0x53facf=_0x29c86b[_0x2d6d34(0x1b2)][_0x1c934e['query'][_0x2d6d34(0x225)]][_0x2d6d34(0x1f9)][_0x1c934e[_0x2d6d34(0x1a2)][_0x2d6d34(0x1a7)]]['path'];fs['remove'](_0x53facf)[_0x2d6d34(0x189)](()=>{const _0x422a46=_0x2d6d34;console[_0x422a46(0x1f1)](_0x422a46(0x214));})[_0x2d6d34(0x21b)](_0x52abea=>{const _0x17fecc=_0x2d6d34;console[_0x17fecc(0x1db)](_0x17fecc(0x1ae),_0x52abea);}),delete _0x29c86b[_0x2d6d34(0x1b2)][_0x1c934e['query'][_0x2d6d34(0x225)]][_0x2d6d34(0x1f9)][_0x1c934e[_0x2d6d34(0x1a2)][_0x2d6d34(0x1a7)]];if(Object[_0x2d6d34(0x18c)](_0x29c86b[_0x2d6d34(0x1b2)][_0x1c934e['query'][_0x2d6d34(0x225)]][_0x2d6d34(0x1f9)])['length']==0x0){fs[_0x2d6d34(0x1f3)](decodeURIComponent(_0x1c934e[_0x2d6d34(0x1a2)][_0x2d6d34(0x1e1)]))[_0x2d6d34(0x189)](()=>{const _0x4b55f3=_0x2d6d34;console[_0x4b55f3(0x1f1)]('Directory\x20removed\x20successfully!');})[_0x2d6d34(0x21b)](_0x430ab8=>{console['error']('Error\x20removing\x20directory:',_0x430ab8);}),_0x320e35[_0x2d6d34(0x201)]({'status':_0x2d6d34(0x234)});return;}else fs[_0x2d6d34(0x156)](_0x3ed9f4,JSON['stringify'](_0x29c86b,null,0x2),_0x2d6d34(0x15d),_0x1a0808=>{const _0x15ab38=_0x2d6d34;_0x1a0808&&console[_0x15ab38(0x1f1)](_0x1a0808);});}if(!decodeURIComponent(_0x1c934e['query'][_0x2d6d34(0x1a6)])||!isSubpath(decodeURIComponent(_0x1c934e[_0x2d6d34(0x1a2)][_0x2d6d34(0x1a6)]))){_0x320e35[_0x2d6d34(0x201)]({'error':'no_path'});return;}const _0x58c904=_0x1c934e[_0x2d6d34(0x1a2)][_0x2d6d34(0x1e8)]=='series'?path[_0x2d6d34(0x1c8)](decodeURIComponent(_0x1c934e[_0x2d6d34(0x1a2)][_0x2d6d34(0x1e1)]),_0x1c934e[_0x2d6d34(0x1a2)]['season'],_0x1c934e[_0x2d6d34(0x1a2)][_0x2d6d34(0x1a7)]):decodeURIComponent(_0x1c934e[_0x2d6d34(0x1a2)]['root']);fs[_0x2d6d34(0x1f3)](_0x58c904)[_0x2d6d34(0x189)](()=>{console['log']('Directory\x20removed\x20successfully!');})[_0x2d6d34(0x21b)](_0x2488d2=>{const _0x437501=_0x2d6d34;console[_0x437501(0x1db)](_0x437501(0x1ae),_0x2488d2);}),_0x320e35['json']({'status':_0x2d6d34(0x234)});}catch(_0x5e8657){console[_0x2d6d34(0x1db)](_0x5e8657),_0x320e35[_0x2d6d34(0x201)]({'error':_0x5e8657});}});let rootPath=process[_0x1f8f5b(0x1e2)][0x2];try{!fs['existsSync'](rootPath)&&fs[_0x1f8f5b(0x140)](rootPath,{'recursive':!![]});}catch(_0x3d3ed3){console['error'](_0x3d3ed3);}let savePath=path[_0x1f8f5b(0x1c8)](rootPath,'downloads'),settingsPath=path['join'](rootPath,_0x1f8f5b(0x235));app['get'](_0x1f8f5b(0x17f),async(_0x59db44,_0x87a588)=>{const _0x31850c=_0x1f8f5b;try{let _0x1037a3={'save':!![]};if(!fs[_0x31850c(0x14a)](settingsPath)){fs['writeFileSync'](settingsPath,JSON['stringify'](_0x1037a3,null,0x2),_0x31850c(0x15d)),_0x87a588['json']({'status':_0x31850c(0x234)});return;}const _0x3eb016=fs[_0x31850c(0x1cb)](settingsPath,_0x31850c(0x15d));_0x1037a3=JSON[_0x31850c(0x1ef)](_0x3eb016),_0x1037a3['path']&&(savePath=_0x1037a3['path']),_0x87a588[_0x31850c(0x201)]({'path':savePath,'save':_0x1037a3[_0x31850c(0x18e)]});}catch(_0x105c62){console[_0x31850c(0x1f1)](_0x105c62),_0x87a588[_0x31850c(0x201)]({'error':_0x105c62});}});function moveFolder(_0x28fab0,_0xdbf6f8){const _0x300b17=_0x1f8f5b;fs[_0x300b17(0x19f)](_0x28fab0,_0xdbf6f8,_0x4df48a=>{const _0x78ca5b=_0x300b17;_0x4df48a?console['error'](_0x78ca5b(0x1dd)+_0x4df48a):console[_0x78ca5b(0x1f1)](_0x78ca5b(0x184)+_0x28fab0+_0x78ca5b(0x206)+_0xdbf6f8);});}app[_0x1f8f5b(0x19c)](_0x1f8f5b(0x1f2),async(_0x5bf097,_0x59f140)=>{const _0x114988=_0x1f8f5b;try{let _0x518b92={},_0x158665=_0x5bf097[_0x114988(0x1a2)][_0x114988(0x233)];(_0x5bf097[_0x114988(0x1a2)][_0x114988(0x219)]==='true'||_0x5bf097['query']['val']==='false')&&(_0x158665=_0x5bf097['query'][_0x114988(0x219)]==='true');if(!fs[_0x114988(0x14a)](settingsPath)){_0x518b92[_0x5bf097[_0x114988(0x1a2)][_0x114988(0x233)]]=_0x158665,fs[_0x114988(0x156)](settingsPath,JSON[_0x114988(0x172)](_0x518b92,null,0x2),_0x114988(0x15d)),_0x59f140[_0x114988(0x201)]({'status':'success'});return;}const _0x253e01=fs[_0x114988(0x1cb)](settingsPath,_0x114988(0x15d));_0x518b92=JSON[_0x114988(0x1ef)](_0x253e01),_0x518b92[_0x5bf097[_0x114988(0x1a2)][_0x114988(0x233)]]=_0x158665,fs[_0x114988(0x156)](settingsPath,JSON[_0x114988(0x172)](_0x518b92),_0x114988(0x15d)),_0x5bf097[_0x114988(0x1a2)][_0x114988(0x233)]==_0x114988(0x1a6)&&moveFolder(savePath,_0x5bf097[_0x114988(0x1a2)]['value']),_0x59f140[_0x114988(0x201)]({'status':_0x114988(0x234)});}catch(_0x5ec591){console[_0x114988(0x1db)](_0x5ec591),_0x59f140['json']({'error':_0x5ec591});}});function isSubpath(_0xa13198){const _0x3becd7=_0x1f8f5b,_0x38d5d8=path[_0x3becd7(0x1dc)](savePath),_0x2f449e=path[_0x3becd7(0x1dc)](_0xa13198);return _0x2f449e['startsWith'](_0x38d5d8);}app[_0x1f8f5b(0x19c)](_0x1f8f5b(0x1ca),async(_0x39f8d4,_0xc1a70d)=>{const _0x183889=_0x1f8f5b,_0x18e033={};for(let _0x42b898=0x1;_0x42b898<=0x24;_0x42b898++){_0x18e033[_0x42b898[_0x183889(0x180)]()]=(_0x42b898===0x1?_0x183889(0x1ff):_0x42b898===0x2?_0x183889(0x232):_0x42b898===0x3?_0x183889(0x183):_0x42b898===0x4?_0x183889(0x15f):_0x42b898===0x5?'fifth':_0x42b898===0x6?_0x183889(0x14c):_0x42b898===0x7?_0x183889(0x230):_0x42b898===0x8?'eighth':_0x42b898===0x9?_0x183889(0x1c0):_0x42b898===0xa?'tenth':_0x42b898===0xb?_0x183889(0x191):_0x42b898===0xc?_0x183889(0x1a5):_0x42b898===0xd?'thirteenth':_0x42b898===0xe?_0x183889(0x1e6):_0x42b898===0xf?_0x183889(0x18a):_0x42b898===0x10?_0x183889(0x1c4):_0x42b898===0x11?_0x183889(0x1e7):_0x42b898===0x12?_0x183889(0x177):_0x42b898===0x13?_0x183889(0x21e):_0x42b898===0x14?_0x183889(0x1bf):_0x42b898===0x15?'twenty-first':_0x42b898===0x16?'twenty-second':_0x42b898===0x17?_0x183889(0x1d9):_0x42b898===0x18?_0x183889(0x179):_0x42b898===0x19?'twenty-fifth':_0x42b898===0x1a?'twenty-sixth':_0x42b898===0x1b?_0x183889(0x20f):_0x42b898===0x1c?_0x183889(0x1e3):_0x42b898===0x1d?_0x183889(0x1cd):_0x42b898===0x1e?_0x183889(0x185):_0x42b898===0x1f?_0x183889(0x198):_0x42b898===0x20?_0x183889(0x1c7):_0x42b898===0x21?'thirty-third':_0x42b898===0x22?_0x183889(0x15b):_0x42b898===0x23?_0x183889(0x207):_0x183889(0x174))+_0x183889(0x226);}const _0x24289c=_0x39f8d4[_0x183889(0x1a2)]['season']?_0x18e033[_0x39f8d4[_0x183889(0x1a2)][_0x183889(0x225)]]:'',_0x54def2=_0x183889(0x1e9)+_0x39f8d4[_0x183889(0x1a2)]['id']+'/'+_0x39f8d4[_0x183889(0x1a2)][_0x183889(0x200)]+'/'+_0x24289c,_0x31114a=await subtitles['scrap'](_0x54def2);_0xc1a70d[_0x183889(0x201)](_0x31114a);}),app[_0x1f8f5b(0x1f0)]('/select',async(_0x1a23a4,_0x281121)=>{const _0x36d107=_0x1f8f5b;try{if(_0x1a23a4[_0x36d107(0x162)][_0x36d107(0x141)]==null||_0x1a23a4[_0x36d107(0x162)][_0x36d107(0x141)]==undefined){_0x281121[_0x36d107(0x201)]({'error':'no_index','type':'Episode\x20not\x20selected','message':_0x36d107(0x22c)});return;}const _0x241338=await torrents,_0x2d2214=_0x241338['promiseExport']({..._0x1a23a4['body']});videos['set'](_0x2d2214['id'],{..._0x2d2214}),delete _0x2d2214[_0x36d107(0x14f)],delete _0x2d2214[_0x36d107(0x146)],_0x281121[_0x36d107(0x201)]({'status':_0x36d107(0x234),..._0x2d2214});}catch(_0x3f6c87){_0x281121[_0x36d107(0x201)]({'error':'unknown','type':_0x36d107(0x239),'message':_0x3f6c87['toString']()});}}),app[_0x1f8f5b(0x1f0)]('/subtitles/parse',(_0xe8fcc1,_0x1b2d5a)=>{const _0x2675fa=_0x1f8f5b,_0x3cf82e=require('busboy'),_0x46d6ce=_0x3cf82e({'headers':_0xe8fcc1[_0x2675fa(0x137)]});let _0x549728=Buffer[_0x2675fa(0x148)](0x0);_0x46d6ce['on'](_0x2675fa(0x14f),(_0x47751d,_0x54f2bf,_0x47fbbf,_0x4e01b4,_0x368a8b)=>{const _0xb2ba50=_0x2675fa;_0x54f2bf['on'](_0xb2ba50(0x23c),_0xf457d=>{_0x549728=Buffer['concat']([_0x549728,_0xf457d]);}),_0x54f2bf['on'](_0xb2ba50(0x14e),()=>{const _0x29dcc0=_0xb2ba50;console[_0x29dcc0(0x1f1)](_0x29dcc0(0x22d)+_0x47751d+_0x29dcc0(0x154));});}),_0x46d6ce['on'](_0x2675fa(0x19e),async()=>{const _0xe5b921=_0x2675fa;console[_0xe5b921(0x1f1)](_0xe5b921(0x193));const _0x306820=await subtitles['parse'](_0x549728);console[_0xe5b921(0x1f1)](_0x306820),_0x1b2d5a['send'](_0x549728['toString'](_0xe5b921(0x212)));}),_0xe8fcc1[_0x2675fa(0x158)](_0x46d6ce);}),app[_0x1f8f5b(0x19c)](_0x1f8f5b(0x18b),async(_0xbbf99f,_0x4c4d76)=>{const _0x5a3e5=_0x1f8f5b;try{const _0x343e3c=_0xbbf99f[_0x5a3e5(0x1a2)]['url'],_0x3ac99c=await subtitles[_0x5a3e5(0x167)](_0x343e3c);_0x4c4d76[_0x5a3e5(0x201)](_0x3ac99c);}catch(_0x53e4d7){console[_0x5a3e5(0x1f1)](_0x53e4d7),_0x4c4d76[_0x5a3e5(0x17b)](0x190)['send'](_0x53e4d7[_0x5a3e5(0x229)]);}}),app[_0x1f8f5b(0x19c)]('/providers',async(_0x57b1d4,_0x1714af)=>{const _0x5bb1f0=_0x1f8f5b;try{const _0x2b5433=await providers['scrap']('https://www.themoviedb.org/'+_0x57b1d4[_0x5bb1f0(0x1a2)][_0x5bb1f0(0x1e8)][_0x5bb1f0(0x236)](_0x5bb1f0(0x20d),'tv')+'/'+_0x57b1d4['query'][_0x5bb1f0(0x200)]+_0x5bb1f0(0x1c3)+_0x57b1d4[_0x5bb1f0(0x1a2)][_0x5bb1f0(0x209)]);_0x1714af[_0x5bb1f0(0x201)](_0x2b5433);}catch(_0x2081ac){console[_0x5bb1f0(0x1f1)](_0x2081ac),_0x1714af[_0x5bb1f0(0x17b)](0x190)[_0x5bb1f0(0x16f)](_0x2081ac['message']);}}),app['get'](_0x1f8f5b(0x1cc),(_0x48b105,_0x56461c)=>{const _0x197ef1=_0x1f8f5b;try{const _0x5a1d9b=decodeURIComponent(_0x48b105[_0x197ef1(0x1a2)]['path']);if(!_0x5a1d9b||!fs[_0x197ef1(0x14a)](_0x5a1d9b))return _0x56461c[_0x197ef1(0x17b)](0x194)[_0x197ef1(0x201)]({'error':'file_not_found'});const _0x32c883=path[_0x197ef1(0x1ab)](_0x5a1d9b);_0x56461c[_0x197ef1(0x160)](_0x197ef1(0x216),_0x197ef1(0x1aa)+_0x32c883+'\x22'),_0x56461c[_0x197ef1(0x1d5)](path[_0x197ef1(0x1dc)](_0x5a1d9b),_0x2bc8f0=>{const _0x5f06c2=_0x197ef1;_0x2bc8f0&&(console['error'](_0x2bc8f0),!_0x56461c[_0x5f06c2(0x222)]&&_0x56461c[_0x5f06c2(0x17b)](0x1f4)['send'](_0x2bc8f0['message']));});}catch(_0xf84d83){!_0x56461c[_0x197ef1(0x222)]&&_0x56461c[_0x197ef1(0x17b)](0x190)['json']({'error':_0xf84d83[_0x197ef1(0x229)]});}}),app['post']('/setsrt',express[_0x1f8f5b(0x23e)]({'limit':_0x1f8f5b(0x1b4),'extended':!![]}),(_0x116487,_0x2e114e)=>{const _0x30921d=_0x1f8f5b,_0x252fb0=_0x116487[_0x30921d(0x162)]['path'],_0x1a41c3=_0x116487[_0x30921d(0x162)]['srt'];if(!_0x1a41c3||!_0x252fb0){_0x2e114e[_0x30921d(0x201)]({'error':_0x30921d(0x1fb)});return;}try{let _0x32f9e6;if(_0x116487[_0x30921d(0x162)]['append']==!![]){let _0x5aceb6=path[_0x30921d(0x1c8)](rootPath,_0x30921d(0x197),'subtitles');!fs[_0x30921d(0x14a)](_0x5aceb6)&&fs[_0x30921d(0x140)](_0x5aceb6,{'recursive':!![]}),_0x32f9e6=path[_0x30921d(0x1c8)](_0x5aceb6,_0x252fb0),fs[_0x30921d(0x156)](_0x32f9e6,_0x1a41c3,_0x30921d(0x15d)),console['log'](_0x32f9e6);}else{const _0x24a942=path[_0x30921d(0x173)](_0x252fb0);_0x32f9e6=_0x252fb0['replace'](_0x24a942,'.srt'),fs[_0x30921d(0x156)](_0x32f9e6,_0x1a41c3,_0x30921d(0x15d));}_0x2e114e['json']({'url':_0x30921d(0x161)+encodeURIComponent(_0x32f9e6)});}catch(_0x2812c9){console[_0x30921d(0x1db)](_0x2812c9);}}),app[_0x1f8f5b(0x1f0)](_0x1f8f5b(0x13c),async(_0x51cd7e,_0x191508)=>{const _0x234927=_0x1f8f5b;try{if(_0x51cd7e[_0x234927(0x162)]['action']==_0x234927(0x220)){allowLocalNetwork=![],_0x191508['json']({'status':_0x234927(0x234)});return;}const _0x5e33a5=await ip[_0x234927(0x1de)](_0x51cd7e[_0x234927(0x1a2)]['true']===_0x234927(0x17d));allowLocalNetwork=!![];const _0x4c5815=require(_0x234927(0x192));try{let _0x7115a8=await _0x4c5815[_0x234927(0x139)](_0x234927(0x165)+_0x5e33a5['ip']+_0x234927(0x1ce));_0x5e33a5['qr']=_0x7115a8;}catch(_0x5a5f5c){console[_0x234927(0x1db)](_0x5a5f5c);}_0x191508[_0x234927(0x201)](_0x5e33a5);}catch(_0x42077e){_0x191508[_0x234927(0x17b)](0x1f4)[_0x234927(0x201)]({'error':_0x42077e[_0x234927(0x229)]});}}),app['post'](_0x1f8f5b(0x186),async(_0x2956ce,_0x18e533)=>{const _0x5cadd5=_0x1f8f5b;try{if(_0x2956ce[_0x5cadd5(0x162)][_0x5cadd5(0x1d3)]==_0x5cadd5(0x220)){allowLocalNetwork=![],_0x18e533['json']({'status':_0x5cadd5(0x234)});return;}const _0x3edc4d=await ip[_0x5cadd5(0x1de)](_0x2956ce[_0x5cadd5(0x1a2)][_0x5cadd5(0x17d)]==='true');allowLocalNetwork=!![];const _0x52df28=require('qrcode');try{let _0x30f793=await _0x52df28[_0x5cadd5(0x139)](_0x2956ce[_0x5cadd5(0x162)][_0x5cadd5(0x1d0)]);_0x3edc4d['qr']=_0x30f793;}catch(_0x41665e){console['error'](_0x41665e);}_0x18e533[_0x5cadd5(0x201)](_0x3edc4d);}catch(_0x1fa567){_0x18e533['status'](0x1f4)[_0x5cadd5(0x201)]({'error':_0x1fa567[_0x5cadd5(0x229)]});}});let imagesGloabl=[];const downloadImage=(_0x48dc6c,_0x5641c3)=>{return new Promise((_0x4f808f,_0x31c0bf)=>{const _0x514154=_0x420b;https[_0x514154(0x19c)](_0x48dc6c,_0x27c79a=>{const _0x403cb4=_0x514154;if(_0x27c79a[_0x403cb4(0x15e)]!==0xc8)return _0x31c0bf(new Error(_0x403cb4(0x1f5)+_0x48dc6c+_0x403cb4(0x1c5)+_0x27c79a['statusCode']+')'));const _0x2bce32=fs[_0x403cb4(0x1da)](_0x5641c3);_0x27c79a[_0x403cb4(0x158)](_0x2bce32),_0x2bce32['on'](_0x403cb4(0x19e),_0x4f808f),_0x2bce32['on'](_0x403cb4(0x1db),_0x31c0bf);})['on']('error',_0x4cae18=>{_0x31c0bf(_0x4cae18);});});},downloadImages=async _0x36c4d9=>{const _0x4ab816=_0x1f8f5b,_0x16cea7=path[_0x4ab816(0x1c8)](rootPath,'public','offline',_0x4ab816(0x197));!fs[_0x4ab816(0x14a)](_0x16cea7)&&fs[_0x4ab816(0x140)](_0x16cea7);if(!_0x36c4d9)return;for(const [_0x397231,_0x3fe56a]of _0x36c4d9['entries']()){try{const _0x3dbe49=_0x3fe56a['replace'](_0x4ab816(0x19a),''),_0x589fb5=_0x3dbe49[_0x4ab816(0x20a)]('/');if(imagesGloabl['includes'](_0x589fb5[0x1]))continue;!fs['existsSync'](path['join'](_0x16cea7,_0x589fb5[0x0]))&&fs[_0x4ab816(0x140)](path[_0x4ab816(0x1c8)](_0x16cea7,_0x589fb5[0x0]),{'recursive':!![]});const _0x3cafb7=path[_0x4ab816(0x1c8)](_0x16cea7,_0x589fb5[0x0],_0x589fb5[0x1]);!fs[_0x4ab816(0x14a)](_0x3cafb7)&&(await downloadImage(_0x3fe56a,_0x3cafb7),imagesGloabl[_0x4ab816(0x13b)](_0x589fb5[0x1]));}catch(_0x33f98f){console['error'](_0x4ab816(0x187)+_0x3fe56a+':',_0x33f98f[_0x4ab816(0x229)]);}}};function format(_0x2fd68a){const _0x1876d7=_0x1f8f5b,_0x4e0135=fs[_0x1876d7(0x1f4)](_0x2fd68a);for(const _0x1e25e8 of _0x4e0135){const _0x270d12=path[_0x1876d7(0x1c8)](_0x2fd68a,_0x1e25e8);fs[_0x1876d7(0x13a)](_0x270d12,{'recursive':!![],'force':!![]}),console[_0x1876d7(0x1f1)](_0x1876d7(0x176)+_0x270d12);}}app[_0x1f8f5b(0x1f0)](_0x1f8f5b(0x23b),async(_0x52a988,_0x13f05d)=>{const _0x27a7ae=_0x1f8f5b;try{const _0x3001fb=_0x52a988['body'][_0x27a7ae(0x201)],_0x278858=_0x52a988[_0x27a7ae(0x162)]['images'],_0x430ed3=_0x52a988['body']['begining'];(_0x430ed3==!![]||_0x52a988[_0x27a7ae(0x162)]['clear']==!![])&&(fs[_0x27a7ae(0x13a)](path['join'](rootPath,_0x27a7ae(0x1ea),'offline'),{'recursive':!![],'force':!![]}),console[_0x27a7ae(0x1f1)](_0x27a7ae(0x221)));if(_0x52a988[_0x27a7ae(0x162)][_0x27a7ae(0x1e4)])return;const _0x3372d2=path['join'](rootPath,_0x27a7ae(0x1ea),_0x27a7ae(0x238),'json');!fs[_0x27a7ae(0x14a)](_0x3372d2)&&fs['mkdirSync'](_0x3372d2,{'recursive':!![]}),Object[_0x27a7ae(0x18c)](_0x3001fb)[_0x27a7ae(0x1bc)](([_0x50a812,_0x3d1a18])=>{const _0x50bd08=_0x27a7ae,_0x3312da=path[_0x50bd08(0x1c8)](_0x3372d2,_0x50a812+_0x50bd08(0x1b7));fs[_0x50bd08(0x156)](_0x3312da,JSON[_0x50bd08(0x172)](_0x3d1a18,null,0x2),_0x50bd08(0x15d));}),downloadImages(_0x278858),_0x13f05d[_0x27a7ae(0x201)]({'status':'success'});}catch(_0x2e795f){_0x13f05d[_0x27a7ae(0x17b)](0x1f4)[_0x27a7ae(0x201)]({'error':_0x2e795f[_0x27a7ae(0x229)]});}});const portalSockets=new Map();async function removeFile(_0x533525,_0x535e39){const _0x3233a1=_0x1f8f5b,_0x3a437d=path['normalize'](_0x533525),_0x29d02e=path[_0x3233a1(0x224)](savePath);if(!_0x3a437d[_0x3233a1(0x1a9)](_0x29d02e)){console[_0x3233a1(0x1db)](_0x3233a1(0x20b));return;}fs['rm'](_0x3a437d,{'recursive':!![],'force':!![]},_0x46753b=>{const _0x409b22=_0x3233a1;_0x46753b?console['error'](_0x409b22(0x1ac)+_0x46753b[_0x409b22(0x229)]):console[_0x409b22(0x1f1)]('Path\x20deleted\x20successfully');});try{await client[_0x3233a1(0x1f3)](req[_0x3233a1(0x1a2)]['id']),videos[_0x3233a1(0x18f)](_0x535e39);}catch(_0x2dbad1){console[_0x3233a1(0x1db)](_0x2dbad1);}}function handlePortalMessages(_0x3eb3a9,_0x3c390d,_0x816ee){const _0x3400ad=_0x1f8f5b;try{const _0x3c8d9a=JSON[_0x3400ad(0x1ef)](_0x816ee);if(_0x3c8d9a['ct']=='ftusers'){let _0x2842a4={};portalSockets[_0x3400ad(0x1bc)]((_0x1f7437,_0x2f9255)=>{const _0x2e8f46=_0x3400ad;_0x2842a4[_0x2f9255]={'name':_0x1f7437[_0x2e8f46(0x188)],'ip':_0x1f7437['ip'],'type':_0x1f7437[_0x2e8f46(0x1e8)],'image':_0x1f7437['image']};}),_0x3eb3a9[_0x3400ad(0x16f)](JSON[_0x3400ad(0x172)]({'ct':_0x3400ad(0x237),'users':_0x2842a4}));}}catch(_0x5cb76a){console[_0x3400ad(0x1db)](_0x5cb76a);}}function createWebSocket(_0x13ab8a){const _0x6721ae=_0x1f8f5b,_0x1ce695=new WebSocketServer({'server':_0x13ab8a});let _0x3ca59d=![],_0xf4cc62={},_0x536509={'save':!![]};_0x1ce695['on'](_0x6721ae(0x240),function _0x286475(_0x25e184,_0x37bc35){const _0x49eaca=_0x6721ae;let _0x2ba5e0;const _0x5e734e=url[_0x49eaca(0x1ef)](_0x37bc35['url'],!![])[_0x49eaca(0x1a2)];let _0x5a9144=_0x5e734e['id'];const _0x2e5988=_0x5e734e[_0x49eaca(0x243)],_0x84ed5f=_0x5e734e[_0x49eaca(0x1e8)],_0x67e513=_0x37bc35[_0x49eaca(0x1b1)]['remoteAddress'];let _0x2b719c;_0x5e734e[_0x49eaca(0x1a3)]=='true'&&(_0x2b719c=_0x2e5988);if((!_0x5a9144||!_0x2e5988)&&_0x84ed5f!==_0x49eaca(0x16c)){_0x25e184[_0x49eaca(0x17e)](0xfa0,_0x49eaca(0x204));return;}if(_0x84ed5f!==_0x49eaca(0x16c)){let _0x533f31;!sockets['has'](_0x5a9144)?sockets[_0x49eaca(0x1e5)](_0x5a9144,{'users':{[_0x2e5988]:_0x25e184},'owner':_0x2b719c,'destroy':_0x533f31}):(clearTimeout(sockets[_0x49eaca(0x19c)](_0x5a9144)['destroy']),sockets[_0x49eaca(0x19c)](_0x5a9144)['users'][_0x2e5988]=_0x25e184,!sockets[_0x49eaca(0x19c)](_0x5a9144)[_0x49eaca(0x1a3)]&&(sockets[_0x49eaca(0x19c)](_0x5a9144)[_0x49eaca(0x1a3)]=_0x2b719c),sockets[_0x49eaca(0x19c)](_0x5a9144)[_0x49eaca(0x20e)]=null,console[_0x49eaca(0x1f1)](_0x49eaca(0x1c2)));}else _0x5a9144=_0x67e513[_0x49eaca(0x236)](_0x49eaca(0x1a0),''),portalSockets['set'](_0x5a9144,{'socket':_0x25e184,'type':_0x5e734e[_0x49eaca(0x16d)],'name':_0x5e734e[_0x49eaca(0x188)],'image':_0x5e734e[_0x49eaca(0x1f6)]}),portalSockets[_0x49eaca(0x1bc)]((_0x24e6f3,_0x46a677)=>{const _0x45f7fc=_0x49eaca;_0x46a677!==_0x5a9144&&_0x24e6f3[_0x45f7fc(0x1b1)][_0x45f7fc(0x16f)](JSON['stringify']({'ct':_0x45f7fc(0x240),'id':_0x5a9144,'info':{'ip':_0x67e513['replace'](_0x45f7fc(0x1a0),''),'type':_0x5e734e['device'],'name':_0x5e734e[_0x45f7fc(0x188)],'image':_0x5e734e[_0x45f7fc(0x1f6)]}}));});_0x25e184['on'](_0x49eaca(0x229),async function _0x507e36(_0x4c6035){const _0x574278=_0x49eaca;if(_0x4c6035[_0x574278(0x180)](_0x574278(0x212))==_0x574278(0x1fe)||_0x4c6035[_0x574278(0x180)](_0x574278(0x212))==_0x574278(0x136)){_0x4c6035[_0x574278(0x180)](_0x574278(0x212))==_0x574278(0x1fe)&&_0x25e184[_0x574278(0x16f)](_0x574278(0x136));return;}if(_0x84ed5f!=='portal'){const _0x46473d=await torrents;_0x46473d['handleIncomming'](_0x25e184,_0x5a9144,_0x4c6035['toString'](_0x574278(0x212)));}else handlePortalMessages(_0x25e184,_0x5a9144,_0x4c6035[_0x574278(0x180)]('utf-8'));}),_0x2ba5e0=setInterval(()=>{const _0x48b922=_0x49eaca;_0x25e184[_0x48b922(0x16f)](_0x48b922(0x1fe));},0xfa0),_0x25e184['on']('close',function _0xa23947(){const _0x10aef0=_0x49eaca;let _0x32dde9;clearInterval(_0x2ba5e0);try{console[_0x10aef0(0x1f1)](_0x10aef0(0x168)),_0x84ed5f!==_0x10aef0(0x16c)?(sockets[_0x10aef0(0x19c)](_0x5a9144)[_0x10aef0(0x20e)]=setTimeout(async()=>{const _0x45657e=_0x10aef0;try{!fs[_0x45657e(0x14a)](settingsPath)&&fs['writeFileSync'](settingsPath,JSON[_0x45657e(0x172)](_0x536509,null,0x2),'utf8');const _0x3b9622=fs[_0x45657e(0x1cb)](settingsPath,_0x45657e(0x15d));_0xf4cc62=JSON[_0x45657e(0x1ef)](_0x3b9622),(_0xf4cc62[_0x45657e(0x18e)]==![]||_0xf4cc62[_0x45657e(0x18e)]==!![])&&(_0x32dde9=_0xf4cc62['save']);}catch(_0x1c9041){console['error'](_0x1c9041);}try{const _0x287e10=await client['get'](_0x5a9144);if(_0x32dde9==![]&&_0x287e10){if(sockets[_0x45657e(0x19c)](_0x5a9144)[_0x45657e(0x1a3)]==_0x2e5988){let _0x32b9cc=_0x287e10[_0x45657e(0x1a6)];savePath==_0x32b9cc&&(_0x32b9cc=path['join'](_0x287e10[_0x45657e(0x1a6)],_0x287e10[_0x45657e(0x188)])),removeFile(_0x32b9cc,_0x5a9144);}}}catch(_0x53e8f6){console[_0x45657e(0x1f1)](_0x53e8f6);}},_0x3ca59d?0x7530:0x2710),sockets['has'](_0x5a9144)&&delete sockets[_0x10aef0(0x19c)](_0x5a9144)['users'][_0x2e5988]):(portalSockets[_0x10aef0(0x18f)](_0x5a9144),portalSockets['forEach']((_0x193f6e,_0x179823)=>{const _0x24fb06=_0x10aef0;_0x193f6e[_0x24fb06(0x1b1)][_0x24fb06(0x16f)](JSON[_0x24fb06(0x172)]({'ct':_0x24fb06(0x16b),'id':_0x5a9144}));}));}catch(_0x485f25){console[_0x10aef0(0x1db)](_0x485f25);}}),_0x25e184['on'](_0x49eaca(0x1db),function _0x52969e(_0x5ee5f9){const _0x5c6de4=_0x49eaca;console[_0x5c6de4(0x1db)](_0x5c6de4(0x170),_0x5ee5f9[_0x5c6de4(0x229)]);});});}const crypto=require(_0x1f8f5b(0x213)),calculateFileHash=_0x2d34b0=>{return new Promise((_0x45a28a,_0x193a2c)=>{const _0x4824eb=_0x420b,_0xc790b3=crypto[_0x4824eb(0x1b8)](_0x4824eb(0x199)),_0xf38f14=fs[_0x4824eb(0x22a)](_0x2d34b0);_0xf38f14['on'](_0x4824eb(0x23c),_0x185115=>_0xc790b3['update'](_0x185115)),_0xf38f14['on'](_0x4824eb(0x14e),()=>_0x45a28a(_0xc790b3['digest']('hex'))),_0xf38f14['on']('error',_0x235150=>_0x193a2c(_0x235150));});},calculateCombinedHash=_0xc58a92=>{return new Promise((_0x29691b,_0x50094d)=>{const _0x526195=_0x420b,_0x42c85b=crypto['createHash']('sha256');let _0x292e0e=null;_0xc58a92[_0x526195(0x1bc)]((_0x31cad3,_0x18a8bf)=>{const _0x3bdd5d=_0x526195,_0x38b746=fs[_0x3bdd5d(0x22a)](_0x31cad3);_0x38b746['on'](_0x3bdd5d(0x23c),_0x33cf20=>_0x42c85b[_0x3bdd5d(0x1b5)](_0x33cf20)),_0x38b746['on'](_0x3bdd5d(0x1db),_0x86427c=>{const _0x4f591f=_0x3bdd5d;_0x292e0e=_0x86427c;if(_0x18a8bf===_0xc58a92[_0x4f591f(0x1a1)]-0x1)_0x50094d(_0x86427c);}),_0x38b746['on'](_0x3bdd5d(0x14e),()=>{const _0x165841=_0x3bdd5d;_0x18a8bf===_0xc58a92[_0x165841(0x1a1)]-0x1&&!_0x292e0e&&_0x29691b(_0x42c85b[_0x165841(0x178)](_0x165841(0x1a4)));});});});};app[_0x1f8f5b(0x1f0)](_0x1f8f5b(0x21c),async(_0x5b1c7a,_0x5e3224)=>{const _0x35a815=_0x1f8f5b;try{const {files:_0x5d5ba0}=_0x5b1c7a[_0x35a815(0x162)];if(!Array['isArray'](_0x5d5ba0)||_0x5d5ba0[_0x35a815(0x1a1)]===0x0||_0x5d5ba0['length']>0xf)return _0x5e3224[_0x35a815(0x17b)](0x190)[_0x35a815(0x201)]({'error':_0x35a815(0x149)});const _0x5b631f=await Promise[_0x35a815(0x15c)](_0x5d5ba0[_0x35a815(0x1c9)](_0x30da8f=>calculateFileHash(_0x30da8f))),_0x5c4098=await calculateCombinedHash(_0x5d5ba0);_0x5e3224['status'](0xc8)[_0x35a815(0x201)]({'individualHashes':_0x5b631f,'combinedHash':_0x5c4098});}catch(_0x1e6aa3){_0x5e3224[_0x35a815(0x17b)](0x1f4)[_0x35a815(0x201)]({'error':_0x35a815(0x1c6)});}}),app[_0x1f8f5b(0x138)]((_0x18d3f1,_0x36a65a,_0x19e2fc,_0x254ed8)=>{const _0x17665d=_0x1f8f5b;console[_0x17665d(0x1db)](_0x18d3f1['stack']),_0x19e2fc[_0x17665d(0x17b)](0x1f4)[_0x17665d(0x16f)](_0x17665d(0x155)+_0x18d3f1[_0x17665d(0x150)]);}),http[_0x1f8f5b(0x1fc)](app)[_0x1f8f5b(0x1d4)](0x1388,()=>{const _0x5e8ae3=_0x1f8f5b;console[_0x5e8ae3(0x1f1)](_0x5e8ae3(0x1d2)),process[_0x5e8ae3(0x16f)]&&process[_0x5e8ae3(0x16f)](_0x5e8ae3(0x163));});const httpServer=http[_0x1f8f5b(0x1fc)]();createWebSocket(httpServer),httpServer[_0x1f8f5b(0x1d4)](0x2328,()=>{});