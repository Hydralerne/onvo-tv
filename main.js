const _0x32f17b=_0x97b5;(function(_0x1b1a09,_0xe03e2f){const _0xa25641=_0x97b5,_0x43fbe3=_0x1b1a09();while(!![]){try{const _0x32820d=-parseInt(_0xa25641(0x281))/0x1+parseInt(_0xa25641(0x1f0))/0x2+-parseInt(_0xa25641(0x2a1))/0x3*(parseInt(_0xa25641(0x256))/0x4)+-parseInt(_0xa25641(0x308))/0x5+-parseInt(_0xa25641(0x21d))/0x6+-parseInt(_0xa25641(0x1f6))/0x7+parseInt(_0xa25641(0x283))/0x8;if(_0x32820d===_0xe03e2f)break;else _0x43fbe3['push'](_0x43fbe3['shift']());}catch(_0x5d05d2){_0x43fbe3['push'](_0x43fbe3['shift']());}}}(_0x2b9a,0xe3bff));const express=require(_0x32f17b(0x2a2)),https=require(_0x32f17b(0x217)),http=require(_0x32f17b(0x26a)),path=require(_0x32f17b(0x231)),ejs=require(_0x32f17b(0x25a)),fs=require('fs-extra'),bodyParser=require(_0x32f17b(0x30e)),subtitles=require(_0x32f17b(0x21e)),providers=require('./node/providers.js'),singleMovie=require(_0x32f17b(0x293)),party=require(_0x32f17b(0x289)),ip=require(_0x32f17b(0x2bf)),cors=require('cors'),version=_0x32f17b(0x2d8),WebSocketServer=require('ws')[_0x32f17b(0x284)],app=express(),url=require(_0x32f17b(0x224)),portfinder=require(_0x32f17b(0x291));let isElectron=![];if(process[_0x32f17b(0x29b)][0x3]==_0x32f17b(0x2bd)){}else{if(process[_0x32f17b(0x29b)][0x2])process['argv'][0x2][_0x32f17b(0x24a)](_0x32f17b(0x21c))&&(process[_0x32f17b(0x29b)][0x2]=path['join'](process[_0x32f17b(0x29b)][0x2],_0x32f17b(0x295)));else{const os=require('os');isElectron=!![],os['platform']()==_0x32f17b(0x201)?process[_0x32f17b(0x29b)][0x2]=_0x32f17b(0x276):process['argv'][0x2]=path['join'](os['homedir'](),_0x32f17b(0x2bb));}}let client={};app[_0x32f17b(0x2d5)](_0x32f17b(0x204),!![]),app[_0x32f17b(0x223)](cors());let allowLocalNetwork=![];app[_0x32f17b(0x223)]((_0x4dd42c,_0x5a4e73,_0x3a3a39)=>{const _0x4252f1=_0x32f17b;_0x5a4e73[_0x4252f1(0x2fd)](_0x4252f1(0x226),'*');const _0x3d4e76=_0x4dd42c['ip'],_0x42a7c2=_0x4dd42c[_0x4252f1(0x1f5)][_0x4252f1(0x24e)];if(_0x42a7c2[_0x4252f1(0x24a)](_0x4252f1(0x296))||_0x3d4e76==='127.0.0.1'||_0x3d4e76===_0x4252f1(0x246))return _0x3a3a39();if(!allowLocalNetwork)return _0x5a4e73[_0x4252f1(0x2b6)](0x193)[_0x4252f1(0x285)](_0x4252f1(0x211));_0x3a3a39();}),app[_0x32f17b(0x223)](bodyParser[_0x32f17b(0x263)]()),app[_0x32f17b(0x223)](express['json']({'limit':'50mb'})),app[_0x32f17b(0x223)](express[_0x32f17b(0x27f)]({'limit':_0x32f17b(0x2b2),'extended':!![]})),app[_0x32f17b(0x2d5)](_0x32f17b(0x2ee),[path[_0x32f17b(0x2c6)](__dirname,_0x32f17b(0x25a),_0x32f17b(0x274)),path[_0x32f17b(0x2c6)](__dirname,_0x32f17b(0x25a),'player'),path[_0x32f17b(0x2c6)](__dirname,'ejs',_0x32f17b(0x27e)),path[_0x32f17b(0x2c6)](__dirname,_0x32f17b(0x25a),_0x32f17b(0x2ad)),path['join'](__dirname,'ejs',_0x32f17b(0x297)),path[_0x32f17b(0x2c6)](__dirname,_0x32f17b(0x27d))]),app[_0x32f17b(0x2d5)](_0x32f17b(0x30b),_0x32f17b(0x25a)),app[_0x32f17b(0x223)](express[_0x32f17b(0x23f)](path[_0x32f17b(0x2c6)](__dirname,_0x32f17b(0x27d)))),app[_0x32f17b(0x301)](_0x32f17b(0x1f7),async(_0x53422a,_0xa035e7)=>{const _0x2edb4c=_0x32f17b,_0x5ed0b7=_0x53422a[_0x2edb4c(0x259)][_0x2edb4c(0x2a6)],_0x5bfb51=await party['getData'](_0x5ed0b7);_0xa035e7[_0x2edb4c(0x258)]('partyIn',{'req':_0x53422a,'data':_0x5bfb51});}),app[_0x32f17b(0x301)](_0x32f17b(0x2ac),async(_0x301bb2,_0x574371)=>{const _0x4eea31=_0x32f17b,_0xad7af9=_0x301bb2[_0x4eea31(0x30a)][_0x4eea31(0x30c)],_0x3a4ee5=_0x301bb2[_0x4eea31(0x30a)]['id'],_0x2d9c59=await singleMovie[_0x4eea31(0x1fc)](_0xad7af9,_0x3a4ee5);_0x574371[_0x4eea31(0x258)](_0x4eea31(0x1fa),{'req':_0x301bb2,'data':_0x2d9c59});}),app['get']('/:type(movie|series)/:endpoint',async(_0x56fb3f,_0x4517e4)=>{const _0x399c10=_0x32f17b,{type:_0xd5be35,endpoint:_0x4e609e}=_0x56fb3f[_0x399c10(0x259)],_0x2b404d=await singleMovie['getData'](_0xd5be35,_0x4e609e);if(!_0x2b404d){_0x4517e4[_0x399c10(0x263)]({'error':_0x399c10(0x230)});return;}_0x4517e4['render'](_0x399c10(0x297),{'req':_0x56fb3f,'data':_0x2b404d});}),app[_0x32f17b(0x301)]('/',(_0x1f7c14,_0x951e2f)=>{const _0x5b9f94=_0x32f17b;_0x951e2f[_0x5b9f94(0x258)](_0x5b9f94(0x243),{'req':_0x1f7c14});}),app[_0x32f17b(0x301)]('/:type(private_css|private_js)/:folder/:file',async(_0x51c54b,_0x363b8c)=>{const _0x379f44=_0x32f17b;try{const {type:_0x5081fb,folder:_0x5c8c21,file:_0x6a191d}=_0x51c54b[_0x379f44(0x259)];if(_0x5081fb!==_0x379f44(0x203)&&_0x5081fb!==_0x379f44(0x2b3)||!_0x6a191d[_0x379f44(0x247)]('.js')&&!_0x6a191d[_0x379f44(0x247)]('.css'))return _0x363b8c[_0x379f44(0x2b6)](0x194)[_0x379f44(0x285)]('');const _0xfd9bb9=path[_0x379f44(0x2c6)](__dirname,'ejs',_0x5c8c21,_0x6a191d),_0x5412d7=_0x5081fb==='private_css'?_0x379f44(0x2b4):_0x379f44(0x21f);_0x363b8c[_0x379f44(0x2d5)](_0x379f44(0x2c0),_0x5412d7),_0x363b8c[_0x379f44(0x2a0)](_0xfd9bb9);}catch(_0x10fa91){console[_0x379f44(0x248)](_0x379f44(0x210),_0x10fa91),_0x363b8c['status'](0x1f4)[_0x379f44(0x285)]('Internal\x20Server\x20Error');}});const videos=new Map(),sockets=new Map();async function HandleSos(_0x907dc2,_0x49120f,_0x59d87f){const _0x547d99=_0x32f17b;try{const _0x2f131c=await _0x59d87f['getVideo'](decodeURIComponent(_0x907dc2['query']['link']),{'mvid':_0x907dc2['query']['id'],..._0x907dc2[_0x547d99(0x30a)]},_0x907dc2['headers'][_0x547d99(0x242)],videos,sockets);_0x2f131c[_0x547d99(0x30c)]!==_0x547d99(0x2d0)&&videos[_0x547d99(0x2d5)](_0x2f131c['id'],{..._0x2f131c});const _0x8013c9=_0x2f131c;delete _0x8013c9['file'],delete _0x8013c9['files'],_0x49120f[_0x547d99(0x2b6)](0xc8)[_0x547d99(0x263)]({..._0x8013c9,'status':_0x547d99(0x2d7)});}catch(_0x4731c2){console[_0x547d99(0x248)](_0x4731c2);if(_0x4731c2['type']==_0x547d99(0x2d3)){let _0x5811c4=videos[_0x547d99(0x301)](_0x4731c2['id']);delete _0x5811c4[_0x547d99(0x24b)],delete _0x5811c4[_0x547d99(0x2f5)],_0x49120f['status'](0xc8)[_0x547d99(0x263)]({..._0x5811c4,'id':_0x4731c2['id'],'downloaded':_0x4731c2[_0x547d99(0x252)],'magnate':_0x4731c2[_0x547d99(0x22c)],'status':'success'});}else _0x4731c2[_0x547d99(0x30c)]=='no_avilable_space'?_0x49120f[_0x547d99(0x2b6)](0xc8)[_0x547d99(0x263)]({'status':'error','error':_0x4731c2}):_0x49120f[_0x547d99(0x2b6)](0xc8)[_0x547d99(0x263)](_0x4731c2);}}let torrents=import('./node/cores.mjs');((async()=>{const _0x354e0d=_0x32f17b;client=(await torrents)[_0x354e0d(0x1ee)];})()),app[_0x32f17b(0x301)]('/videoadd',async(_0x1bb439,_0x55daff)=>{const _0x52c572=_0x32f17b;try{HandleSos(_0x1bb439,_0x55daff,await torrents);}catch(_0x1599ac){console[_0x52c572(0x248)](_0x1599ac),_0x55daff['status'](0x1f4)[_0x52c572(0x263)](_0x1599ac);}}),app[_0x32f17b(0x301)]('/torrents',async(_0x474dc6,_0xc249a3)=>{const _0x5b181b=_0x32f17b;try{let _0x2e408a={},_0x15cd81=0x0,_0x180c72=0x0,_0x507525={};client['torrents']?.[_0x5b181b(0x2f6)]((_0x4868b3,_0x5ddc22)=>{const _0x1480d1=_0x5b181b;let _0xd83d75={};!_0x4868b3[_0x1480d1(0x2c1)]&&(_0x4868b3[_0x1480d1(0x2f5)][_0x1480d1(0x2f6)](_0x820def=>{const _0x51f11e=_0x1480d1;_0xd83d75={'name':_0x820def['name'],'path':_0x820def['path'],'size':_0x820def[_0x51f11e(0x25b)]};}),_0x2e408a[_0x5ddc22]={'size':_0x4868b3[_0x1480d1(0x261)],'downloaded':_0x4868b3[_0x1480d1(0x252)],'path':_0x4868b3[_0x1480d1(0x231)],'paused':_0x4868b3[_0x1480d1(0x2cb)]},_0x15cd81+=_0x4868b3['length'],_0x180c72+=_0x4868b3[_0x1480d1(0x252)]);});try{let _0x3deebd=path['join'](savePath,_0x5b181b(0x2c5));if(fs[_0x5b181b(0x1e1)](_0x3deebd)){const _0x56b97e=fs[_0x5b181b(0x206)](_0x3deebd,_0x5b181b(0x1e0));_0x507525=JSON['parse'](_0x56b97e);}}catch(_0x1330cf){console[_0x5b181b(0x2a9)](_0x1330cf);}_0xc249a3[_0x5b181b(0x263)]({'downloaded':_0x180c72,'size':_0x15cd81,'data':_0x2e408a,'save':_0x507525['save']});}catch(_0x233d74){console[_0x5b181b(0x248)](_0x233d74),_0xc249a3['status'](0x1f4)[_0x5b181b(0x263)](_0x233d74);}}),app[_0x32f17b(0x2f8)](_0x32f17b(0x1e6),async(_0x4eb394,_0x253589)=>{const _0x588413=_0x32f17b;try{videos[_0x588413(0x205)](_0x4eb394['body']['id']);const _0x119a66=await client[_0x588413(0x301)](_0x4eb394['body']['id']);fs[_0x588413(0x306)](_0x119a66[_0x588413(0x231)])[_0x588413(0x239)](()=>{const _0x3c3759=_0x588413;console['log'](_0x3c3759(0x2f4));})[_0x588413(0x309)](_0x181867=>{const _0x47ebd4=_0x588413;console[_0x47ebd4(0x248)](_0x47ebd4(0x2b5),_0x181867);}),await client[_0x588413(0x306)](_0x4eb394['body']['id']),_0x119a66[_0x588413(0x257)](_0x119a66),_0x253589['json']({'status':_0x588413(0x2d7)});}catch(_0x38f158){console[_0x588413(0x248)](_0x38f158),_0x253589[_0x588413(0x2b6)](0x1f4)[_0x588413(0x263)](_0x38f158);}}),app['get'](_0x32f17b(0x290),async(_0x3be094,_0x1c0278)=>{const _0x2be1f4=_0x32f17b;try{if(_0x3be094[_0x2be1f4(0x30a)][_0x2be1f4(0x30c)]==_0x2be1f4(0x2ae)){client['torrents'][_0x2be1f4(0x2f6)]((_0x2f2453,_0x5dd30)=>{const _0x56d5e7=_0x2be1f4;_0x2f2453[_0x56d5e7(0x257)]();}),_0x1c0278['json']({'status':_0x2be1f4(0x2d7),'length':client[_0x2be1f4(0x2aa)][_0x2be1f4(0x261)]});return;}if(!_0x3be094['query']['id']||!await client[_0x2be1f4(0x301)](_0x3be094[_0x2be1f4(0x30a)]['id'])){_0x1c0278[_0x2be1f4(0x263)]({'error':_0x2be1f4(0x302)});return;}const _0x5f0f32=await client['get'](_0x3be094[_0x2be1f4(0x30a)]['id']);_0x5f0f32[_0x2be1f4(0x257)](_0x5f0f32),await client[_0x2be1f4(0x306)](_0x3be094[_0x2be1f4(0x30a)]['id']),_0x1c0278[_0x2be1f4(0x263)]({'status':'success'});}catch(_0x3d0139){console[_0x2be1f4(0x248)](_0x3d0139),_0x1c0278[_0x2be1f4(0x2b6)](0x1f4)['json'](_0x3d0139);}}),app['get'](_0x32f17b(0x1ea),async(_0x177c5f,_0x506bda)=>{const _0x38ae58=_0x32f17b;if(!videos['has'](_0x177c5f[_0x38ae58(0x30a)]['id'])){_0x506bda[_0x38ae58(0x2b6)](0x194)[_0x38ae58(0x263)]({'error':'no_video_found'});return;}try{const _0x499118=await videos['get'](_0x177c5f[_0x38ae58(0x30a)]['id']),_0xc2eca3=_0x499118['file'],_0x39c0db=_0x177c5f[_0x38ae58(0x1f5)][_0x38ae58(0x208)],_0x19d869=_0xc2eca3[_0x38ae58(0x261)],_0x3be90b=0xa**0x6;let _0x336703,_0x1e925b={'Content-Type':_0x499118[_0x38ae58(0x1fb)],'Content-Length':_0x19d869};if(_0x39c0db){const _0x2378dc=_0x39c0db[_0x38ae58(0x229)](/bytes=/,'')[_0x38ae58(0x213)]('-'),_0x20871e=parseInt(_0x2378dc[0x0],0xa),_0xb3c15a=_0x2378dc[0x1]?parseInt(_0x2378dc[0x1],0xa):_0x19d869-0x1,_0x16f656=_0xb3c15a-_0x20871e+0x1;_0x336703={'start':_0x20871e,'end':_0xb3c15a},_0x1e925b={'Content-Range':_0x38ae58(0x20c)+_0x20871e+'-'+_0xb3c15a+'/'+_0x19d869,'Accept-Ranges':'bytes','Content-Length':_0x16f656,'Content-Type':_0x499118[_0x38ae58(0x1fb)]};}const _0x5f5208=_0xc2eca3[_0x38ae58(0x1ed)](_0x336703);_0x5f5208['on'](_0x38ae58(0x248),_0x2f828d=>{}),_0x506bda['writeHead'](0xce,_0x1e925b),_0x5f5208[_0x38ae58(0x26c)](_0x506bda);}catch(_0x3d98e2){console[_0x38ae58(0x248)](_0x38ae58(0x2fa),_0x3d98e2),_0x506bda['status'](0x1f4)[_0x38ae58(0x263)]({'error':_0x38ae58(0x244)});}});function installFFmpegStatic(){const _0x105998=_0x32f17b,_0xdc5739=process[_0x105998(0x2c3)];let _0x3c1ecf;switch(_0xdc5739){case'win32':_0x3c1ecf=_0x105998(0x2e2);break;case _0x105998(0x1e4):_0x3c1ecf='ffmpeg-static@darwin';break;case'linux':_0x3c1ecf=_0x105998(0x2be);break;default:console['error'](_0x105998(0x24d),_0xdc5739),process[_0x105998(0x2a4)](0x1);}try{execSync(_0x105998(0x28f)+_0x3c1ecf,{'stdio':_0x105998(0x2b7)}),console['log'](_0x3c1ecf+_0x105998(0x1f9)),ffmpegStatic=require(_0x3c1ecf);}catch(_0x54f168){console[_0x105998(0x248)]('Error\x20installing\x20'+_0x3c1ecf+':',_0x54f168),process[_0x105998(0x2a4)](0x1);}}let ffmpeg,ffmpegStatic;isElectron&&(ffmpeg=require(_0x32f17b(0x273)),async()=>{const _0x4320cc=_0x32f17b;let _0x29dd22;const {execSync:_0x2ff002}=require('child_process');try{switch(platform){case _0x4320cc(0x201):_0x29dd22=_0x4320cc(0x2e2);break;case _0x4320cc(0x1e4):_0x29dd22=_0x4320cc(0x22e);break;case _0x4320cc(0x221):_0x29dd22='ffmpeg-static@linux';break;default:console['error']('Unsupported\x20platform:',platform),process['exit'](0x1);}ffmpegStatic=require(_0x29dd22),ffmpeg[_0x4320cc(0x30d)](ffmpegStatic);}catch(_0x2a13ef){console[_0x4320cc(0x248)](_0x2a13ef),!ffmpegStatic&&installFFmpegStatic();}});app[_0x32f17b(0x301)]('/audioget',async(_0x140c32,_0x443a09)=>{const _0x4306cd=_0x32f17b;if(!isElectron)return _0x443a09[_0x4306cd(0x263)]({'status':_0x4306cd(0x2ba)});try{const _0x1a60ea=await videos[_0x4306cd(0x301)](_0x140c32[_0x4306cd(0x30a)]['id']),_0x109053=_0x1a60ea['file'],_0x4794fc=_0x140c32[_0x4306cd(0x1f5)][_0x4306cd(0x208)],_0x4964d5=_0x109053[_0x4306cd(0x261)],_0x29bb38=0xa**0x6;let _0x1264c9,_0x159a8e={'Content-Type':_0x4306cd(0x2dc),'Content-Length':_0x4964d5};if(_0x4794fc){const _0x3b5daa=_0x4794fc[_0x4306cd(0x229)](/bytes=/,'')[_0x4306cd(0x213)]('-'),_0x2dc0e2=parseInt(_0x3b5daa[0x0],0xa),_0x20f1ca=_0x3b5daa[0x1]?parseInt(_0x3b5daa[0x1],0xa):_0x4964d5-0x1,_0x5a82d9=_0x20f1ca-_0x2dc0e2+0x1;_0x1264c9={'start':_0x2dc0e2,'end':_0x20f1ca},_0x159a8e={'Content-Range':_0x4306cd(0x20c)+_0x2dc0e2+'-'+_0x20f1ca+'/'+_0x4964d5,'Accept-Ranges':'bytes','Content-Length':_0x5a82d9,'Content-Type':_0x4306cd(0x2dc)};}const _0xe0e66b=_0x109053['createReadStream'](_0x1264c9);_0xe0e66b['on']('error',_0x26c792=>{}),_0x443a09['writeHead'](0xce,_0x159a8e);const _0x584b4e=await ffmpeg(_0xe0e66b)[_0x4306cd(0x2c4)]()['audioCodec']('libmp3lame')['format'](_0x4306cd(0x2e5))['on']('error',_0x421ad1=>{const _0x199c5a=_0x4306cd;console[_0x199c5a(0x248)](_0x199c5a(0x1ec),_0x421ad1),_0x443a09[_0x199c5a(0x2e3)]();});_0x584b4e['pipe'](_0x443a09,{'end':!![]});}catch(_0x24b9c5){console['error'](_0x4306cd(0x2fa),_0x24b9c5),_0x443a09['status'](0x1f4)[_0x4306cd(0x263)]({'error':'Error\x20fetching\x20video'});}}),app[_0x32f17b(0x301)](_0x32f17b(0x27b),(_0x457e2a,_0x259576)=>{const _0x513549=_0x32f17b;import(_0x513549(0x25e))[_0x513549(0x239)](async _0x42cfcd=>{const _0x96978e=_0x513549;try{const _0x96b06c=await _0x42cfcd[_0x96978e(0x2ab)](savePath);_0x259576[_0x96978e(0x263)](_0x96b06c);}catch(_0x2442d9){_0x259576['send'](_0x2442d9['toString']());}});}),app[_0x32f17b(0x301)]('/download',(_0x22f078,_0xd9706)=>{const _0x581905=_0x32f17b;_0xd9706['render'](_0x581905(0x2ad),{'req':_0x22f078});}),app[_0x32f17b(0x301)]('/check',(_0x1aad9b,_0x480a90)=>{const _0x3f1fe2=_0x32f17b;_0x480a90[_0x3f1fe2(0x263)]({'status':_0x3f1fe2(0x2d7),'version':version});}),app[_0x32f17b(0x301)](_0x32f17b(0x2a3),async(_0x18f2dc,_0x5dc73a)=>{const _0x40498c=_0x32f17b;try{if(_0x18f2dc[_0x40498c(0x30a)][_0x40498c(0x30c)]==_0x40498c(0x233)){const _0x5b6fd6=path[_0x40498c(0x2c6)](decodeURIComponent(_0x18f2dc[_0x40498c(0x30a)][_0x40498c(0x307)]),'info.json'),_0x86ceef=fs[_0x40498c(0x206)](_0x5b6fd6,_0x40498c(0x1e0)),_0x4b6d9a=JSON['parse'](_0x86ceef),_0x2cb4f0=_0x4b6d9a[_0x40498c(0x279)][_0x18f2dc['query'][_0x40498c(0x255)]][_0x40498c(0x249)][_0x18f2dc[_0x40498c(0x30a)][_0x40498c(0x220)]][_0x40498c(0x231)];fs['remove'](_0x2cb4f0)[_0x40498c(0x239)](()=>{const _0x3d09bf=_0x40498c;console[_0x3d09bf(0x2a9)](_0x3d09bf(0x270));})['catch'](_0x2eae29=>{const _0x2b0b66=_0x40498c;console[_0x2b0b66(0x248)](_0x2b0b66(0x2b5),_0x2eae29);}),delete _0x4b6d9a[_0x40498c(0x279)][_0x18f2dc[_0x40498c(0x30a)]['season']][_0x40498c(0x249)][_0x18f2dc[_0x40498c(0x30a)]['episode']];if(Object[_0x40498c(0x1dd)](_0x4b6d9a['seasons'][_0x18f2dc[_0x40498c(0x30a)]['season']][_0x40498c(0x249)])['length']==0x0){fs[_0x40498c(0x306)](decodeURIComponent(_0x18f2dc[_0x40498c(0x30a)][_0x40498c(0x307)]))[_0x40498c(0x239)](()=>{const _0x10027c=_0x40498c;console[_0x10027c(0x2a9)](_0x10027c(0x2f4));})[_0x40498c(0x309)](_0x58709e=>{const _0xa94294=_0x40498c;console[_0xa94294(0x248)](_0xa94294(0x2b5),_0x58709e);}),_0x5dc73a[_0x40498c(0x263)]({'status':_0x40498c(0x2d7)});return;}else fs[_0x40498c(0x207)](_0x5b6fd6,JSON[_0x40498c(0x287)](_0x4b6d9a,null,0x2),_0x40498c(0x1e0),_0x4445cd=>{const _0x2c8866=_0x40498c;_0x4445cd&&console[_0x2c8866(0x2a9)](_0x4445cd);});}if(!decodeURIComponent(_0x18f2dc[_0x40498c(0x30a)]['path'])||!isSubpath(decodeURIComponent(_0x18f2dc[_0x40498c(0x30a)][_0x40498c(0x231)]))){_0x5dc73a[_0x40498c(0x263)]({'error':_0x40498c(0x2c2)});return;}const _0x5c9efb=_0x18f2dc[_0x40498c(0x30a)]['type']=='series'?path['join'](decodeURIComponent(_0x18f2dc['query']['root']),_0x18f2dc[_0x40498c(0x30a)]['season'],_0x18f2dc[_0x40498c(0x30a)]['episode']):decodeURIComponent(_0x18f2dc[_0x40498c(0x30a)][_0x40498c(0x307)]);fs['remove'](_0x5c9efb)[_0x40498c(0x239)](()=>{const _0x4cfdaa=_0x40498c;console[_0x4cfdaa(0x2a9)](_0x4cfdaa(0x2f4));})[_0x40498c(0x309)](_0x35b672=>{const _0x16ad5a=_0x40498c;console[_0x16ad5a(0x248)](_0x16ad5a(0x2b5),_0x35b672);}),_0x5dc73a[_0x40498c(0x263)]({'status':_0x40498c(0x2d7)});}catch(_0x3eff06){console[_0x40498c(0x248)](_0x3eff06),_0x5dc73a[_0x40498c(0x263)]({'error':_0x3eff06});}});let rootPath=process[_0x32f17b(0x29b)][0x2];try{!fs[_0x32f17b(0x1e1)](rootPath)&&fs['mkdirSync'](rootPath,{'recursive':!![]});}catch(_0x3fef7e){console['error'](_0x3fef7e);}let savePath=path['join'](rootPath,_0x32f17b(0x2fc)),settingsPath=path['join'](rootPath,_0x32f17b(0x2c5));function _0x97b5(_0x408094,_0x5154ec){const _0x2b9ae3=_0x2b9a();return _0x97b5=function(_0x97b5ea,_0x371159){_0x97b5ea=_0x97b5ea-0x1dc;let _0x3a58fb=_0x2b9ae3[_0x97b5ea];return _0x3a58fb;},_0x97b5(_0x408094,_0x5154ec);}app[_0x32f17b(0x301)](_0x32f17b(0x25d),async(_0x885463,_0x49daa0)=>{const _0x32142d=_0x32f17b;try{let _0x423815={'save':!![]};if(!fs[_0x32142d(0x1e1)](settingsPath)){fs['writeFileSync'](settingsPath,JSON[_0x32142d(0x287)](_0x423815,null,0x2),_0x32142d(0x1e0)),_0x49daa0[_0x32142d(0x263)]({'status':'success'});return;}const _0xa1d95f=fs['readFileSync'](settingsPath,_0x32142d(0x1e0));_0x423815=JSON['parse'](_0xa1d95f),_0x423815['path']&&(savePath=_0x423815[_0x32142d(0x231)]),_0x49daa0[_0x32142d(0x263)]({'path':savePath,'save':_0x423815[_0x32142d(0x253)]});}catch(_0x535d83){console['log'](_0x535d83),_0x49daa0[_0x32142d(0x263)]({'error':_0x535d83});}});function moveFolder(_0x2eaa60,_0x5e436b){const _0x5b1332=_0x32f17b;fs[_0x5b1332(0x2f3)](_0x2eaa60,_0x5e436b,_0x35997a=>{const _0x1ff914=_0x5b1332;_0x35997a?console[_0x1ff914(0x248)](_0x1ff914(0x2a8)+_0x35997a):console['log'](_0x1ff914(0x2a7)+_0x2eaa60+_0x1ff914(0x222)+_0x5e436b);});}app[_0x32f17b(0x301)](_0x32f17b(0x2db),async(_0x2f29a7,_0x20c2f7)=>{const _0x405239=_0x32f17b;try{let _0x4ce93c={},_0xb0ddf5=_0x2f29a7[_0x405239(0x30a)][_0x405239(0x280)];(_0x2f29a7[_0x405239(0x30a)][_0x405239(0x219)]==='true'||_0x2f29a7['query'][_0x405239(0x219)]===_0x405239(0x1f3))&&(_0xb0ddf5=_0x2f29a7[_0x405239(0x30a)][_0x405239(0x219)]===_0x405239(0x23c));if(!fs[_0x405239(0x1e1)](settingsPath)){_0x4ce93c[_0x2f29a7['query']['key']]=_0xb0ddf5,fs[_0x405239(0x207)](settingsPath,JSON['stringify'](_0x4ce93c,null,0x2),_0x405239(0x1e0)),_0x20c2f7[_0x405239(0x263)]({'status':'success'});return;}const _0x1f4df4=fs[_0x405239(0x206)](settingsPath,_0x405239(0x1e0));_0x4ce93c=JSON[_0x405239(0x2e6)](_0x1f4df4),_0x4ce93c[_0x2f29a7[_0x405239(0x30a)]['key']]=_0xb0ddf5,fs[_0x405239(0x207)](settingsPath,JSON[_0x405239(0x287)](_0x4ce93c),'utf8'),_0x2f29a7[_0x405239(0x30a)]['key']==_0x405239(0x231)&&moveFolder(savePath,_0x2f29a7[_0x405239(0x30a)][_0x405239(0x26b)]),_0x20c2f7[_0x405239(0x263)]({'status':_0x405239(0x2d7)});}catch(_0x28d104){console[_0x405239(0x248)](_0x28d104),_0x20c2f7['json']({'error':_0x28d104});}});function isSubpath(_0x413bdb){const _0x1d7e77=_0x32f17b,_0x515649=path['resolve'](savePath),_0x305053=path['resolve'](_0x413bdb);return _0x305053[_0x1d7e77(0x25f)](_0x515649);}app[_0x32f17b(0x301)](_0x32f17b(0x1e5),async(_0x2c3838,_0x3a3aac)=>{const _0x17dc00=_0x32f17b,_0x1ad251={};for(let _0x4f447b=0x1;_0x4f447b<=0x24;_0x4f447b++){_0x1ad251[_0x4f447b[_0x17dc00(0x2d1)]()]=(_0x4f447b===0x1?'first':_0x4f447b===0x2?_0x17dc00(0x2f2):_0x4f447b===0x3?_0x17dc00(0x2e8):_0x4f447b===0x4?_0x17dc00(0x264):_0x4f447b===0x5?_0x17dc00(0x240):_0x4f447b===0x6?'sixth':_0x4f447b===0x7?'seventh':_0x4f447b===0x8?_0x17dc00(0x2ea):_0x4f447b===0x9?'ninth':_0x4f447b===0xa?_0x17dc00(0x23d):_0x4f447b===0xb?_0x17dc00(0x305):_0x4f447b===0xc?_0x17dc00(0x216):_0x4f447b===0xd?_0x17dc00(0x20d):_0x4f447b===0xe?_0x17dc00(0x2ca):_0x4f447b===0xf?_0x17dc00(0x2eb):_0x4f447b===0x10?_0x17dc00(0x20b):_0x4f447b===0x11?_0x17dc00(0x241):_0x4f447b===0x12?_0x17dc00(0x20a):_0x4f447b===0x13?'nineteenth':_0x4f447b===0x14?'twentieth':_0x4f447b===0x15?_0x17dc00(0x268):_0x4f447b===0x16?_0x17dc00(0x2af):_0x4f447b===0x17?_0x17dc00(0x271):_0x4f447b===0x18?_0x17dc00(0x2e0):_0x4f447b===0x19?_0x17dc00(0x227):_0x4f447b===0x1a?_0x17dc00(0x234):_0x4f447b===0x1b?'twenty-seventh':_0x4f447b===0x1c?_0x17dc00(0x215):_0x4f447b===0x1d?_0x17dc00(0x29f):_0x4f447b===0x1e?_0x17dc00(0x2d2):_0x4f447b===0x1f?_0x17dc00(0x245):_0x4f447b===0x20?_0x17dc00(0x1ef):_0x4f447b===0x21?'thirty-third':_0x4f447b===0x22?'thirty-fourth':_0x4f447b===0x23?_0x17dc00(0x22f):_0x17dc00(0x300))+_0x17dc00(0x1e7);}const _0x35ea87=_0x2c3838[_0x17dc00(0x30a)][_0x17dc00(0x255)]?_0x1ad251[_0x2c3838[_0x17dc00(0x30a)][_0x17dc00(0x255)]]:'',_0x3d1237=_0x17dc00(0x1e9)+_0x2c3838['query']['id']+'/'+_0x2c3838[_0x17dc00(0x30a)][_0x17dc00(0x29d)]+'/'+_0x35ea87,_0x414f65=await subtitles[_0x17dc00(0x269)](_0x3d1237);_0x3a3aac[_0x17dc00(0x263)](_0x414f65);}),app[_0x32f17b(0x2f8)](_0x32f17b(0x2f9),async(_0x1b0d06,_0x29a46c)=>{const _0x42f734=_0x32f17b;try{if(_0x1b0d06['body'][_0x42f734(0x2de)]==null||_0x1b0d06[_0x42f734(0x1fe)][_0x42f734(0x2de)]==undefined){_0x29a46c['json']({'error':_0x42f734(0x304),'type':_0x42f734(0x2b0),'message':_0x42f734(0x24f)});return;}const _0x2ae1ed=await torrents,_0x25c2b5=_0x2ae1ed[_0x42f734(0x2e9)]({..._0x1b0d06[_0x42f734(0x1fe)]});videos[_0x42f734(0x2d5)](_0x25c2b5['id'],{..._0x25c2b5}),delete _0x25c2b5[_0x42f734(0x24b)],delete _0x25c2b5['files'],_0x29a46c[_0x42f734(0x263)]({'status':'success',..._0x25c2b5});}catch(_0x551703){_0x29a46c[_0x42f734(0x263)]({'error':_0x42f734(0x2ff),'type':_0x42f734(0x29e),'message':_0x551703[_0x42f734(0x2d1)]()});}}),app[_0x32f17b(0x2f8)](_0x32f17b(0x265),express[_0x32f17b(0x27f)]({'limit':'1mb','extended':!![]}),(_0x147ae8,_0x720189)=>{const _0x1e4003=_0x32f17b,_0x39e246=require(_0x1e4003(0x2f1)),_0x8b7147=_0x39e246({'headers':_0x147ae8['headers']});let _0x3dc23f=Buffer[_0x1e4003(0x275)](0x0);_0x8b7147['on'](_0x1e4003(0x24b),(_0xfe7223,_0x41c934,_0x16116d,_0x4ab92c,_0x3008ca)=>{const _0x259798=_0x1e4003;_0x41c934['on']('data',_0x32e528=>{const _0x1ad738=_0x97b5;_0x3dc23f=Buffer[_0x1ad738(0x29a)]([_0x3dc23f,_0x32e528]);}),_0x41c934['on'](_0x259798(0x2e3),()=>{const _0x2fb528=_0x259798;console[_0x2fb528(0x2a9)](_0x2fb528(0x260)+_0xfe7223+_0x2fb528(0x1fd));});}),_0x8b7147['on']('finish',async()=>{const _0x30b937=_0x1e4003;console[_0x30b937(0x2a9)](_0x30b937(0x303));const _0xa0bdfb=await subtitles[_0x30b937(0x2e6)](_0x3dc23f),_0x3586d9=await subtitles[_0x30b937(0x2e6)](_0x3dc23f);_0x720189[_0x30b937(0x1dc)](_0x30b937(0x218),'attachment;\x20filename=\x22subtitles.srt\x22'),_0x720189[_0x30b937(0x1dc)](_0x30b937(0x2c0),'text/plain'),console[_0x30b937(0x2a9)](_0x3586d9);}),_0x147ae8[_0x1e4003(0x26c)](_0x8b7147);}),app[_0x32f17b(0x301)](_0x32f17b(0x2d4),async(_0x316aad,_0x2d4ec5)=>{const _0x1355ac=_0x32f17b;try{const _0x4becc4=_0x316aad['query']['url'],_0x4c85df=await subtitles['getZip'](_0x4becc4);_0x2d4ec5[_0x1355ac(0x263)](_0x4c85df);}catch(_0xbe263a){console['log'](_0xbe263a),_0x2d4ec5[_0x1355ac(0x2b6)](0x190)[_0x1355ac(0x285)](_0xbe263a[_0x1355ac(0x2cd)]);}}),app[_0x32f17b(0x301)]('/providers',async(_0x3d8990,_0xd244d0)=>{const _0x4fe834=_0x32f17b;try{const _0x464bd3=await providers[_0x4fe834(0x269)]('https://www.themoviedb.org/'+_0x3d8990[_0x4fe834(0x30a)]['type'][_0x4fe834(0x229)]('series','tv')+'/'+_0x3d8990[_0x4fe834(0x30a)]['slug']+'/watch?locale='+_0x3d8990['query'][_0x4fe834(0x2f7)]);_0xd244d0[_0x4fe834(0x263)](_0x464bd3);}catch(_0x3d1cfc){console[_0x4fe834(0x2a9)](_0x3d1cfc),_0xd244d0[_0x4fe834(0x2b6)](0x190)[_0x4fe834(0x285)](_0x3d1cfc[_0x4fe834(0x2cd)]);}}),app['get'](_0x32f17b(0x26e),(_0x3de1d6,_0x11f5b9)=>{const _0x2ea2d5=_0x32f17b;try{const _0x58dcd6=decodeURIComponent(_0x3de1d6[_0x2ea2d5(0x30a)][_0x2ea2d5(0x231)]);if(!_0x58dcd6||!fs[_0x2ea2d5(0x1e1)](_0x58dcd6))return _0x11f5b9[_0x2ea2d5(0x2b6)](0x194)[_0x2ea2d5(0x263)]({'error':'file_not_found'});const _0x17d490=path[_0x2ea2d5(0x28c)](_0x58dcd6);_0x11f5b9['setHeader'](_0x2ea2d5(0x218),_0x2ea2d5(0x272)+_0x17d490+'\x22'),_0x11f5b9[_0x2ea2d5(0x2a0)](path[_0x2ea2d5(0x200)](_0x58dcd6),_0x1f8757=>{const _0x29fa09=_0x2ea2d5;_0x1f8757&&(console[_0x29fa09(0x248)](_0x1f8757),!_0x11f5b9[_0x29fa09(0x2ef)]&&_0x11f5b9[_0x29fa09(0x2b6)](0x1f4)[_0x29fa09(0x285)](_0x1f8757[_0x29fa09(0x2cd)]));});}catch(_0x313ab6){!_0x11f5b9[_0x2ea2d5(0x2ef)]&&_0x11f5b9[_0x2ea2d5(0x2b6)](0x190)[_0x2ea2d5(0x263)]({'error':_0x313ab6['message']});}}),app[_0x32f17b(0x301)](_0x32f17b(0x2ec),(_0x1a4312,_0x3a36aa)=>{const _0x193086=_0x32f17b;try{const _0x12fca8=decodeURIComponent(_0x1a4312[_0x193086(0x30a)][_0x193086(0x231)]);if(!_0x12fca8||!fs[_0x193086(0x1e1)](_0x12fca8))return _0x3a36aa[_0x193086(0x2b6)](0x194)[_0x193086(0x263)]({'error':_0x193086(0x2f0)});const _0x128618=path[_0x193086(0x28c)](_0x12fca8,path[_0x193086(0x24c)](_0x12fca8))+_0x193086(0x2ce),_0x2598ba=path[_0x193086(0x2c6)](path['dirname'](_0x12fca8),_0x128618),_0x3f5b1e=path[_0x193086(0x200)](_0x2598ba);if(fs[_0x193086(0x1e1)](_0x3f5b1e))return _0x3a36aa[_0x193086(0x1dc)]('Content-Disposition',_0x193086(0x272)+_0x128618+'\x22'),_0x3a36aa[_0x193086(0x2a0)](_0x3f5b1e,_0x2b1877=>{const _0x32e8f5=_0x193086;_0x2b1877&&(console[_0x32e8f5(0x248)](_0x2b1877),!_0x3a36aa['headersSent']&&_0x3a36aa[_0x32e8f5(0x2b6)](0x1f4)[_0x32e8f5(0x285)](_0x2b1877[_0x32e8f5(0x2cd)]));});ffmpeg(_0x12fca8)[_0x193086(0x2c4)]()[_0x193086(0x2b1)](_0x193086(0x2d6))[_0x193086(0x1e8)]('mp3')['on'](_0x193086(0x2e3),()=>{const _0x586062=_0x193086;_0x3a36aa['setHeader'](_0x586062(0x218),_0x586062(0x272)+_0x128618+'\x22'),_0x3a36aa['sendFile'](_0x3f5b1e,_0x2fe4a5=>{const _0x4dc357=_0x586062;_0x2fe4a5&&(console[_0x4dc357(0x248)](_0x2fe4a5),!_0x3a36aa[_0x4dc357(0x2ef)]&&_0x3a36aa[_0x4dc357(0x2b6)](0x1f4)['send'](_0x2fe4a5[_0x4dc357(0x2cd)]));});})['on'](_0x193086(0x248),_0x355cf3=>{const _0x13fa87=_0x193086;console[_0x13fa87(0x248)](_0x13fa87(0x28b),_0x355cf3),!_0x3a36aa['headersSent']&&_0x3a36aa[_0x13fa87(0x2b6)](0x1f4)['json']({'error':_0x13fa87(0x251),'message':_0x355cf3[_0x13fa87(0x2cd)]});})[_0x193086(0x253)](_0x3f5b1e);}catch(_0xc0017b){!_0x3a36aa[_0x193086(0x2ef)]&&_0x3a36aa[_0x193086(0x2b6)](0x190)[_0x193086(0x263)]({'error':_0xc0017b[_0x193086(0x2cd)]});}}),app[_0x32f17b(0x2f8)]('/setsrt',express[_0x32f17b(0x27f)]({'limit':_0x32f17b(0x21a),'extended':!![]}),(_0x36f76a,_0x3d2111)=>{const _0x5a67ee=_0x32f17b,_0x303715=_0x36f76a['body']['path'],_0x5377bc=_0x36f76a[_0x5a67ee(0x1fe)][_0x5a67ee(0x25c)];if(!_0x5377bc||!_0x303715){_0x3d2111[_0x5a67ee(0x263)]({'error':_0x5a67ee(0x20f)});return;}try{let _0x370f3b;if(_0x36f76a[_0x5a67ee(0x1fe)][_0x5a67ee(0x2c8)]==!![]){let _0x12a8ff=path[_0x5a67ee(0x2c6)](rootPath,_0x5a67ee(0x2fc),'subtitles');!fs[_0x5a67ee(0x1e1)](_0x12a8ff)&&fs[_0x5a67ee(0x1f8)](_0x12a8ff,{'recursive':!![]}),_0x370f3b=path['join'](_0x12a8ff,_0x303715),fs[_0x5a67ee(0x207)](_0x370f3b,_0x5377bc,_0x5a67ee(0x1e0)),console[_0x5a67ee(0x2a9)](_0x370f3b);}else{const _0x351271=path['extname'](_0x303715);_0x370f3b=_0x303715[_0x5a67ee(0x229)](_0x351271,'.srt'),fs[_0x5a67ee(0x207)](_0x370f3b,_0x5377bc,_0x5a67ee(0x1e0));}_0x3d2111[_0x5a67ee(0x263)]({'url':_0x5a67ee(0x2d9)+encodeURIComponent(_0x370f3b)});}catch(_0x2e0fd0){console[_0x5a67ee(0x248)](_0x2e0fd0);}}),app[_0x32f17b(0x2f8)](_0x32f17b(0x29c),async(_0x8a9a41,_0x37ee55)=>{const _0x230570=_0x32f17b;try{if(_0x8a9a41[_0x230570(0x1fe)][_0x230570(0x209)]==_0x230570(0x1df)){allowLocalNetwork=![],_0x37ee55['json']({'status':_0x230570(0x2d7)});return;}const _0x5d682e=await ip[_0x230570(0x2cc)](_0x8a9a41[_0x230570(0x30a)][_0x230570(0x23c)]==='true');allowLocalNetwork=!![];const _0x2d571b=require(_0x230570(0x262));let _0x500999=_0x230570(0x1de)+_0x5d682e['ip']+_0x230570(0x2a5);_0x8a9a41[_0x230570(0x1fe)][_0x230570(0x224)]&&(_0x500999=_0x230570(0x1de)+_0x5d682e['ip']+(_0x8a9a41[_0x230570(0x1fe)][_0x230570(0x2da)]&&_0x8a9a41['body'][_0x230570(0x2da)]!==''?':'+_0x8a9a41[_0x230570(0x1fe)][_0x230570(0x2da)]:_0x230570(0x236))+_0x8a9a41[_0x230570(0x1fe)]['url'],_0x5d682e[_0x230570(0x224)]=_0x500999);try{let _0x2d822f=await _0x2d571b[_0x230570(0x2e7)](_0x500999);_0x5d682e['qr']=_0x2d822f;}catch(_0x354cd2){console[_0x230570(0x248)](_0x354cd2);}_0x37ee55[_0x230570(0x263)](_0x5d682e);}catch(_0x2d00c8){_0x37ee55['status'](0x1f4)[_0x230570(0x263)]({'error':_0x2d00c8[_0x230570(0x2cd)]});}}),app[_0x32f17b(0x2f8)](_0x32f17b(0x1f1),async(_0x4b1d7e,_0x5ad13a)=>{const _0x397d1a=_0x32f17b;try{if(_0x4b1d7e[_0x397d1a(0x1fe)][_0x397d1a(0x209)]==_0x397d1a(0x1df)){allowLocalNetwork=![],_0x5ad13a[_0x397d1a(0x263)]({'status':_0x397d1a(0x2d7)});return;}const _0x920838=await ip[_0x397d1a(0x2cc)](_0x4b1d7e['query'][_0x397d1a(0x23c)]===_0x397d1a(0x23c));allowLocalNetwork=!![];const _0x1c7f39=require(_0x397d1a(0x262));try{let _0x50a73a=await _0x1c7f39[_0x397d1a(0x2e7)](_0x4b1d7e['body'][_0x397d1a(0x224)]);_0x920838['qr']=_0x50a73a;}catch(_0x545626){console['error'](_0x545626);}_0x5ad13a['json'](_0x920838);}catch(_0x245f85){_0x5ad13a[_0x397d1a(0x2b6)](0x1f4)[_0x397d1a(0x263)]({'error':_0x245f85['message']});}});let imagesGloabl=[];const downloadImage=(_0x18cdad,_0x386e9e)=>{return new Promise((_0x32a508,_0x914642)=>{const _0x2dd259=_0x97b5;https[_0x2dd259(0x301)](_0x18cdad,_0x667eaf=>{const _0xc12a4c=_0x2dd259;if(_0x667eaf[_0xc12a4c(0x298)]!==0xc8)return _0x914642(new Error(_0xc12a4c(0x2e4)+_0x18cdad+_0xc12a4c(0x2b8)+_0x667eaf['statusCode']+')'));const _0x8a7520=fs[_0xc12a4c(0x1eb)](_0x386e9e);_0x667eaf['pipe'](_0x8a7520),_0x8a7520['on'](_0xc12a4c(0x235),_0x32a508),_0x8a7520['on'](_0xc12a4c(0x248),_0x914642);})['on'](_0x2dd259(0x248),_0x5ce029=>{_0x914642(_0x5ce029);});});},downloadImages=async _0x3f1be5=>{const _0x2cd345=_0x32f17b,_0x4a4105=path[_0x2cd345(0x2c6)](rootPath,'public',_0x2cd345(0x2c9),'downloads');!fs[_0x2cd345(0x1e1)](_0x4a4105)&&fs[_0x2cd345(0x1f8)](_0x4a4105);if(!_0x3f1be5)return;for(const [_0x4c668e,_0x5cf946]of _0x3f1be5[_0x2cd345(0x1dd)]()){try{const _0x6531d0=_0x5cf946[_0x2cd345(0x229)](_0x2cd345(0x237),''),_0x53be8e=_0x6531d0['split']('/');if(imagesGloabl[_0x2cd345(0x24a)](_0x53be8e[0x1]))continue;!fs[_0x2cd345(0x1e1)](path[_0x2cd345(0x2c6)](_0x4a4105,_0x53be8e[0x0]))&&fs[_0x2cd345(0x1f8)](path[_0x2cd345(0x2c6)](_0x4a4105,_0x53be8e[0x0]),{'recursive':!![]});const _0x32deda=path[_0x2cd345(0x2c6)](_0x4a4105,_0x53be8e[0x0],_0x53be8e[0x1]);!fs[_0x2cd345(0x1e1)](_0x32deda)&&(await downloadImage(_0x5cf946,_0x32deda),imagesGloabl['push'](_0x53be8e[0x1]));}catch(_0xbc0c40){console['error'](_0x2cd345(0x310)+_0x5cf946+':',_0xbc0c40[_0x2cd345(0x2cd)]);}}};function format(_0x97d09c){const _0x575635=_0x32f17b,_0x1d4b95=fs['readdirSync'](_0x97d09c);for(const _0x54f2dc of _0x1d4b95){const _0x3c9a6c=path['join'](_0x97d09c,_0x54f2dc);fs[_0x575635(0x30f)](_0x3c9a6c,{'recursive':!![],'force':!![]}),console[_0x575635(0x2a9)](_0x575635(0x2c7)+_0x3c9a6c);}}app[_0x32f17b(0x2f8)]('/chache',async(_0x2006dc,_0x548296)=>{const _0x40dc1b=_0x32f17b;try{const _0x4c751a=_0x2006dc[_0x40dc1b(0x1fe)][_0x40dc1b(0x263)],_0x4187ee=_0x2006dc[_0x40dc1b(0x1fe)]['images'],_0x4fff5e=_0x2006dc[_0x40dc1b(0x1fe)][_0x40dc1b(0x23a)];(_0x4fff5e==!![]||_0x2006dc[_0x40dc1b(0x1fe)][_0x40dc1b(0x28e)]==!![])&&(fs[_0x40dc1b(0x30f)](path[_0x40dc1b(0x2c6)](rootPath,_0x40dc1b(0x27d),_0x40dc1b(0x2c9)),{'recursive':!![],'force':!![]}),console[_0x40dc1b(0x2a9)](_0x40dc1b(0x2bc)));if(_0x2006dc[_0x40dc1b(0x1fe)][_0x40dc1b(0x28e)])return;const _0x509837=path[_0x40dc1b(0x2c6)](rootPath,'public',_0x40dc1b(0x2c9),'json');!fs[_0x40dc1b(0x1e1)](_0x509837)&&fs[_0x40dc1b(0x1f8)](_0x509837,{'recursive':!![]}),Object['entries'](_0x4c751a)[_0x40dc1b(0x2f6)](([_0x543f3f,_0x32f064])=>{const _0xbafd92=_0x40dc1b,_0x317f6f=path[_0xbafd92(0x2c6)](_0x509837,_0x543f3f+'.json');fs[_0xbafd92(0x207)](_0x317f6f,JSON['stringify'](_0x32f064,null,0x2),'utf8');}),downloadImages(_0x4187ee),_0x548296[_0x40dc1b(0x263)]({'status':'success'});}catch(_0x83746c){_0x548296[_0x40dc1b(0x2b6)](0x1f4)[_0x40dc1b(0x263)]({'error':_0x83746c[_0x40dc1b(0x2cd)]});}});const portalSockets=new Map();async function removeFile(_0x39eb60,_0x2af3b9){const _0x4c0f31=_0x32f17b,_0xd8416=path['normalize'](_0x39eb60),_0x5d0845=path[_0x4c0f31(0x232)](savePath);if(!_0xd8416['startsWith'](_0x5d0845)){console[_0x4c0f31(0x248)]('The\x20deletePath\x20is\x20outside\x20of\x20the\x20savePath\x20folder');return;}fs['rm'](_0xd8416,{'recursive':!![],'force':!![]},_0x31ac3f=>{const _0x31079c=_0x4c0f31;_0x31ac3f?console['error'](_0x31079c(0x266)+_0x31ac3f['message']):console['log']('Path\x20deleted\x20successfully');});try{await client['remove'](req[_0x4c0f31(0x30a)]['id']),videos[_0x4c0f31(0x205)](_0x2af3b9);}catch(_0x39e56d){console['error'](_0x39e56d);}}function handlePortalMessages(_0x4161c1,_0x1e20f9,_0x118fdc){const _0x4dd2a5=_0x32f17b;try{const _0x1a576b=JSON[_0x4dd2a5(0x2e6)](_0x118fdc);if(_0x1a576b['ct']==_0x4dd2a5(0x2fe)){let _0x5be362={};portalSockets[_0x4dd2a5(0x2f6)]((_0x5390d8,_0x173645)=>{const _0x17628a=_0x4dd2a5;_0x5be362[_0x173645]={'name':_0x5390d8['name'],'ip':_0x5390d8['ip'],'type':_0x5390d8[_0x17628a(0x30c)],'image':_0x5390d8[_0x17628a(0x2ed)]};}),_0x4161c1[_0x4dd2a5(0x285)](JSON[_0x4dd2a5(0x287)]({'ct':'frusers','users':_0x5be362}));}}catch(_0x20eec6){console[_0x4dd2a5(0x248)](_0x20eec6);}}function createWebSocket(_0x497d02){const _0xfaf7cd=_0x32f17b,_0x3fabe8=new WebSocketServer({'server':_0x497d02});let _0x5181e6=![],_0x292e64={},_0x1b343b={'save':!![]};_0x3fabe8['on'](_0xfaf7cd(0x1f2),function _0x201705(_0x31f118,_0x39739a){const _0xf2e6a2=_0xfaf7cd;let _0x1244d6;const _0x23c5b6=url['parse'](_0x39739a[_0xf2e6a2(0x224)],!![])['query'];let _0x18740c=_0x23c5b6['id'];const _0x3b4691=_0x23c5b6[_0xf2e6a2(0x2cf)],_0x1ef537=_0x23c5b6[_0xf2e6a2(0x30c)],_0x593a1c=_0x39739a['socket']['remoteAddress'];let _0x110590;_0x23c5b6[_0xf2e6a2(0x20e)]=='true'&&(_0x110590=_0x3b4691);if((!_0x18740c||!_0x3b4691)&&_0x1ef537!==_0xf2e6a2(0x1ff)){_0x31f118[_0xf2e6a2(0x28a)](0xfa0,_0xf2e6a2(0x278));return;}if(_0x1ef537!==_0xf2e6a2(0x1ff)){let _0x44ef29;!sockets[_0xf2e6a2(0x228)](_0x18740c)?sockets[_0xf2e6a2(0x2d5)](_0x18740c,{'users':{[_0x3b4691]:_0x31f118},'owner':_0x110590,'destroy':_0x44ef29}):(clearTimeout(sockets['get'](_0x18740c)[_0xf2e6a2(0x257)]),sockets[_0xf2e6a2(0x301)](_0x18740c)[_0xf2e6a2(0x2fb)][_0x3b4691]=_0x31f118,!sockets[_0xf2e6a2(0x301)](_0x18740c)[_0xf2e6a2(0x20e)]&&(sockets['get'](_0x18740c)[_0xf2e6a2(0x20e)]=_0x110590),sockets[_0xf2e6a2(0x301)](_0x18740c)[_0xf2e6a2(0x257)]=null,console[_0xf2e6a2(0x2a9)](_0xf2e6a2(0x1e3)));}else _0x18740c=_0x593a1c[_0xf2e6a2(0x229)]('::ffff:',''),portalSockets[_0xf2e6a2(0x2d5)](_0x18740c,{'socket':_0x31f118,'type':_0x23c5b6['device'],'name':_0x23c5b6[_0xf2e6a2(0x2b9)],'image':_0x23c5b6[_0xf2e6a2(0x2ed)]}),portalSockets['forEach']((_0x551e7d,_0x6a4fb0)=>{const _0x41a18c=_0xf2e6a2;_0x6a4fb0!==_0x18740c&&_0x551e7d[_0x41a18c(0x212)][_0x41a18c(0x285)](JSON['stringify']({'ct':_0x41a18c(0x1f2),'id':_0x18740c,'info':{'ip':_0x593a1c[_0x41a18c(0x229)](_0x41a18c(0x22b),''),'type':_0x23c5b6['device'],'name':_0x23c5b6['name'],'image':_0x23c5b6[_0x41a18c(0x2ed)]}}));});_0x31f118['on'](_0xf2e6a2(0x2cd),async function _0xbd0978(_0xbba3a7){const _0x261294=_0xf2e6a2;if(_0xbba3a7[_0x261294(0x2d1)](_0x261294(0x23e))==_0x261294(0x292)||_0xbba3a7[_0x261294(0x2d1)](_0x261294(0x23e))==_0x261294(0x22a)){_0xbba3a7[_0x261294(0x2d1)](_0x261294(0x23e))==_0x261294(0x292)&&_0x31f118[_0x261294(0x285)](_0x261294(0x22a));return;}if(_0x1ef537!==_0x261294(0x1ff)){const _0x3713ef=await torrents;_0x3713ef[_0x261294(0x26d)](_0x31f118,_0x18740c,_0xbba3a7[_0x261294(0x2d1)](_0x261294(0x23e)));}else handlePortalMessages(_0x31f118,_0x18740c,_0xbba3a7[_0x261294(0x2d1)](_0x261294(0x23e)));}),_0x1244d6=setInterval(()=>{const _0x5df7bd=_0xf2e6a2;_0x31f118[_0x5df7bd(0x285)](_0x5df7bd(0x292));},0xfa0),_0x31f118['on'](_0xf2e6a2(0x28a),function _0x49c0fd(){const _0x1ffd33=_0xf2e6a2;let _0xa7fa6a;clearInterval(_0x1244d6);try{console[_0x1ffd33(0x2a9)](_0x1ffd33(0x288)),_0x1ef537!=='portal'?(sockets['get'](_0x18740c)[_0x1ffd33(0x257)]=setTimeout(async()=>{const _0x4fc802=_0x1ffd33;try{!fs[_0x4fc802(0x1e1)](settingsPath)&&fs[_0x4fc802(0x207)](settingsPath,JSON['stringify'](_0x1b343b,null,0x2),_0x4fc802(0x1e0));const _0x24dd80=fs[_0x4fc802(0x206)](settingsPath,_0x4fc802(0x1e0));_0x292e64=JSON[_0x4fc802(0x2e6)](_0x24dd80),(_0x292e64[_0x4fc802(0x253)]==![]||_0x292e64['save']==!![])&&(_0xa7fa6a=_0x292e64[_0x4fc802(0x253)]);}catch(_0xe51c36){console[_0x4fc802(0x248)](_0xe51c36);}try{const _0x5d5573=await client[_0x4fc802(0x301)](_0x18740c);if(_0xa7fa6a==![]&&_0x5d5573){if(sockets['get'](_0x18740c)[_0x4fc802(0x20e)]==_0x3b4691){let _0x5d6d22=_0x5d5573[_0x4fc802(0x231)];savePath==_0x5d6d22&&(_0x5d6d22=path[_0x4fc802(0x2c6)](_0x5d5573[_0x4fc802(0x231)],_0x5d5573[_0x4fc802(0x2b9)])),removeFile(_0x5d6d22,_0x18740c);}}}catch(_0x553355){console[_0x4fc802(0x2a9)](_0x553355);}},_0x5181e6?0x7530:0x2710),sockets['has'](_0x18740c)&&delete sockets['get'](_0x18740c)['users'][_0x3b4691]):(portalSockets[_0x1ffd33(0x205)](_0x18740c),portalSockets['forEach']((_0x2c3c0d,_0x56a971)=>{const _0x4f970e=_0x1ffd33;_0x2c3c0d['socket']['send'](JSON[_0x4f970e(0x287)]({'ct':_0x4f970e(0x282),'id':_0x18740c}));}));}catch(_0xdb6f12){console['error'](_0xdb6f12);}}),_0x31f118['on'](_0xf2e6a2(0x248),function _0x4091cd(_0x56ea0c){const _0x35d446=_0xf2e6a2;console['error'](_0x35d446(0x1f4),_0x56ea0c[_0x35d446(0x2cd)]);});});}const crypto=require(_0x32f17b(0x277)),calculateFileHash=_0x24ba33=>{return new Promise((_0x537290,_0x22d62b)=>{const _0x227b86=_0x97b5,_0x48614c=crypto[_0x227b86(0x21b)](_0x227b86(0x26f)),_0x13cbd5=fs[_0x227b86(0x1ed)](_0x24ba33);_0x13cbd5['on'](_0x227b86(0x27c),_0x367fe9=>_0x48614c['update'](_0x367fe9)),_0x13cbd5['on']('end',()=>_0x537290(_0x48614c[_0x227b86(0x225)](_0x227b86(0x238)))),_0x13cbd5['on'](_0x227b86(0x248),_0x42c223=>_0x22d62b(_0x42c223));});},calculateCombinedHash=_0x5e2116=>{return new Promise((_0x3ec8f7,_0x7fb7d2)=>{const _0x573de4=_0x97b5,_0x543075=crypto[_0x573de4(0x21b)](_0x573de4(0x26f));let _0x205f52=null;_0x5e2116['forEach']((_0x264dbd,_0x29bc15)=>{const _0xe611e7=_0x573de4,_0x115813=fs[_0xe611e7(0x1ed)](_0x264dbd);_0x115813['on'](_0xe611e7(0x27c),_0x18a1dd=>_0x543075['update'](_0x18a1dd)),_0x115813['on'](_0xe611e7(0x248),_0x370d89=>{const _0x2e6ab3=_0xe611e7;_0x205f52=_0x370d89;if(_0x29bc15===_0x5e2116[_0x2e6ab3(0x261)]-0x1)_0x7fb7d2(_0x370d89);}),_0x115813['on'](_0xe611e7(0x2e3),()=>{const _0x5c8bec=_0xe611e7;_0x29bc15===_0x5e2116[_0x5c8bec(0x261)]-0x1&&!_0x205f52&&_0x3ec8f7(_0x543075['digest']('hex'));});});});};app[_0x32f17b(0x2f8)](_0x32f17b(0x286),async(_0x377d78,_0x13702e)=>{const _0xd88e9a=_0x32f17b;try{const {files:_0x14b186}=_0x377d78[_0xd88e9a(0x1fe)];if(!Array[_0xd88e9a(0x214)](_0x14b186)||_0x14b186[_0xd88e9a(0x261)]===0x0||_0x14b186[_0xd88e9a(0x261)]>0xf)return _0x13702e[_0xd88e9a(0x2b6)](0x190)[_0xd88e9a(0x263)]({'error':_0xd88e9a(0x202)});const _0x552ce4=await Promise[_0xd88e9a(0x2ae)](_0x14b186[_0xd88e9a(0x22d)](_0xff6245=>calculateFileHash(_0xff6245))),_0x378994=await calculateCombinedHash(_0x14b186);_0x13702e[_0xd88e9a(0x2b6)](0xc8)['json']({'individualHashes':_0x552ce4,'combinedHash':_0x378994});}catch(_0x247f6a){_0x13702e[_0xd88e9a(0x2b6)](0x1f4)[_0xd88e9a(0x263)]({'error':_0xd88e9a(0x2dd)});}}),app[_0x32f17b(0x223)]((_0x16f1b3,_0x3d810a,_0x25e6ea,_0x2f5ca0)=>{const _0x48e3d7=_0x32f17b;console[_0x48e3d7(0x248)](_0x16f1b3[_0x48e3d7(0x2df)]),_0x25e6ea['status'](0x1f4)[_0x48e3d7(0x285)](_0x48e3d7(0x28d)+_0x16f1b3[_0x48e3d7(0x2df)]);}),portfinder[_0x32f17b(0x23b)]=0x1388,portfinder[_0x32f17b(0x250)]()[_0x32f17b(0x239)](_0x270fc4=>{const _0x1b43cc=_0x32f17b,_0x58a418=http[_0x1b43cc(0x1e2)](app);createWebSocket(_0x58a418),_0x58a418[_0x1b43cc(0x299)](_0x270fc4,()=>{const _0x4c187f=_0x1b43cc;console[_0x4c187f(0x2a9)](_0x4c187f(0x254)+_0x270fc4),process[_0x4c187f(0x285)]&&(process[_0x4c187f(0x267)]['version']==_0x4c187f(0x2d8)?process[_0x4c187f(0x285)]({'message':_0x4c187f(0x294),'port':_0x270fc4}):process[_0x4c187f(0x285)](_0x4c187f(0x294)));}),_0x58a418['on'](_0x1b43cc(0x248),_0x38454f=>{const _0x5d8a0a=_0x1b43cc;console[_0x5d8a0a(0x248)](_0x5d8a0a(0x2e1),_0x38454f);});})['catch'](_0x32dc8d=>{const _0x469ec4=_0x32f17b;console[_0x469ec4(0x248)](_0x469ec4(0x27a),_0x32dc8d);});function _0x2b9a(){const _0x49f882=['urlencoded','key','961644rXgnEe','closed','37354568zyaCLa','WebSocketServer','send','/hash','stringify','WebSocket\x20disconnected','./node/party.js','close','Error\x20converting\x20video\x20to\x20audio:','basename','Something\x20broke!\x20','clear','npm\x20install\x20','/pause','portfinder','ping','./node/singleMovie.js','server-started','../../','localhost','singleMovie','statusCode','listen','concat','argv','/network','slug','Error\x20occured','twenty-ninth','sendFile','9yzChUE','express','/delete','exit',':5000?magic_portal=true','endpoint','Folder\x20moved\x20from\x20','Error\x20moving\x20folder:\x20','log','torrents','getInfo','/player','download','all','twenty-second','Episode\x20not\x20selected','audioCodec','50mb','private_js','text/css','Error\x20removing\x20directory:','status','inherit','\x27\x20(','name','not_supported','ONVO\x20TV','cache\x20cleared','android','ffmpeg-static@linux','./node/ip.js','Content-Type','done','no_path','platform','noVideo','settings.json','join','Deleted:\x20','append','offline','fourteenth','paused','getNetwork','message','.mp3','user','multiple','toString','thirtieth','duplicate_torrent','/subtitles/zip','set','libmp3lame','success','1.5','http://localhost:5000/local?path=','port','/sets','audio/mp3','Server\x20error','index','stack','twenty-fourth','Server\x20error:','ffmpeg-static','end','Failed\x20to\x20get\x20\x27','mp3','parse','toDataURL','third','promiseExport','eighth','fifteenth','/audio','image','views','headersSent','file_not_found','busboy','second','rename','Directory\x20removed\x20successfully!','files','forEach','region','post','/select','Error\x20fetching\x20video:','users','downloads','header','ftusers','unknown','thirty-sixth','get','no_id_found','Upload\x20complete','no_index','eleventh','remove','root','3059750prAFwG','catch','query','view\x20engine','type','setFfmpegPath','body-parser','rmSync','Error\x20downloading\x20','setHeader','entries','http://','disable','utf8','existsSync','createServer','destroyed\x20cleared','darwin','/subtitles','/wipe','-season','format','https://subdl.com/subtitle/sd','/videoget','createWriteStream','Error\x20processing\x20audio:','createReadStream','client','thirty-second','806120dRZvLp','/videoshare','connection','false','WebSocket\x20error:','headers','6486060UvDXtJ','/party/:endpoint','mkdirSync','\x20installed\x20successfully','player','codec','getData',']\x20finished','body','portal','resolve','win32','Please\x20provide\x201\x20to\x2015\x20file\x20paths.','private_css','trust\x20proxy','delete','readFileSync','writeFileSync','range','action','eighteenth','sixteenth','bytes\x20','thirteenth','owner','missed_data','Error:','Access\x20denied','socket','split','isArray','twenty-eighth','twelfth','https','Content-Disposition','val','1mb','createHash','/var/mobile','797922AatLQL','./node/subtitles.js','text/javascript','episode','linux','\x20to\x20','use','url','digest','Access-Control-Allow-Origin','twenty-fifth','has','replace','pong','::ffff:','magnate','map','ffmpeg-static@darwin','thirty-fifth','no_data_found','path','normalize','series','twenty-sixth','finish',':5000','https://image.tmdb.org/t/p/','hex','then','begining','basePort','true','tenth','utf-8','static','fifth','seventeenth','authorization','homePage','Error\x20fetching\x20video','thirty-first','::1','endsWith','error','episodes','includes','file','extname','Unsupported\x20platform:','host','Please\x20select\x20the\x20episode\x20you\x20want\x20to\x20play','getPortPromise','conversion_failed','downloaded','save','HTTP\x20server\x20running\x20on\x20http://localhost:','season','2008476OQguko','destroy','render','params','ejs','size','srt','/info','./node/info.js','startsWith','File\x20[','length','qrcode','json','fourth','/subtitles/parse','Error\x20deleting\x20path:\x20','env','twenty-first','scrap','http','value','pipe','handleIncomming','/local','sha256','episode\x20removed\x20successfully!','twenty-third','attachment;\x20filename=\x22','fluent-ffmpeg','party','alloc','/ONVO\x20TV','crypto','Invalid\x20structure','seasons','No\x20available\x20port\x20found:','/files','data','public','policy'];_0x2b9a=function(){return _0x49f882;};return _0x2b9a();}